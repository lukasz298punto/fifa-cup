"use strict";(self.webpackChunkfifa_cup=self.webpackChunkfifa_cup||[]).push([[398],{8398:function(e,r,n){n.r(r),n.d(r,{default:function(){return ce}});var s=n(9439),t=n(1413),a=n(5987),l=n(6650),i=n(6582),o=n(1091),c=n(1508),d=n(228),u=n(166),p=n(4293),m=n(4565),x=n(501),f=n(3978),h=n(5419),j=n(788),y=n(464),v=n(5629),Z=n(6132),b=n(9562),N=n(4346),w=n(9762),k=n(5738),I=n(763),g=(n(1361),n(2791)),A=n(3168),B=n(184);function P(e){var r=e.onClose,n=e.onPick,s=e.disabledPlayers,a=e.open,l=(0,k.qu)(),i=l.data,o=l.isLoading,c=(0,A.$)().t;return(0,B.jsx)(j.Z,{onClose:r,open:a,children:(0,B.jsxs)(w.g,{loading:o,children:[(0,B.jsx)(y.Z,{children:c("Wybierz zawodnika")}),(0,B.jsx)(v.Z,{sx:{pt:0},children:(0,I.map)(null===i||void 0===i?void 0:i.docs,(function(e){var r=e.data();return(0,B.jsxs)(Z.ZP,{disabled:(0,I.includes)(s,e.id),button:!0,onClick:function(){return n((0,t.Z)((0,t.Z)({},r),{},{id:e.id}))},children:[(0,B.jsx)(b.Z,{children:(0,B.jsx)(f.Z,{sx:{bgcolor:h.Z[100],color:h.Z[600]},children:(0,B.jsx)(x.Z,{})})}),(0,B.jsx)(N.Z,{primary:r.firstName+" "+r.lastName})]},e.id)}))})]})})}var z=g.memo(P),C=n(1487),q=n(6815),S=n(1680),Q=n(9773),F=n(9827),W=n(807),D=n(3811),M=n(8439),V=["onAdd"];var E=function(e){var r=e.onAdd,n=(0,a.Z)(e,V);return(0,B.jsx)(D.Z,(0,t.Z)((0,t.Z)({className:"p-0",size:"small",color:"primary",onClick:r},n),{},{children:(0,B.jsx)(M.Z,{})}))},O=n(4337),T=n(4259),$=function(e){return 0===e?T.Qk.D:e>0?T.Qk.W:T.Qk.L},G=function(e){return 0===e?1:e>0?3:0},L=function(e,r){var n;if(e){var s=null===(n=(0,I.find)(r,{id:e}))||void 0===n?void 0:n.data();return(null===s||void 0===s?void 0:s.firstName)+" "+(null===s||void 0===s?void 0:s.lastName)}},_=n(7539);function R(e){var r=e.players,n=e.promotion,s=e.onAddPlayer,t=e.results,a=e.className,l=(0,A.$)().t,i=(0,k.qu)().data,o=(0,g.useCallback)((function(e){return(0,I.reduce)(t,(function(r,n){var s=n.playerA,t=n.playerB;if(s.score&&t.score){if(s.id===e)return(0,I.concat)(r,{status:$(parseInt(s.score)-parseInt(t.score)),plus:parseInt(s.score),minus:parseInt(t.score),diff:parseInt(s.score)-parseInt(t.score),pkt:G(parseInt(s.score)-parseInt(t.score))});if(t.id===e)return(0,I.concat)(r,{status:$(parseInt(t.score)-parseInt(s.score)),plus:parseInt(t.score),minus:parseInt(s.score),diff:parseInt(t.score)-parseInt(s.score),pkt:G(parseInt(t.score)-parseInt(s.score))})}return r}),[])}),[t]),c=(0,g.useMemo)((function(){if((0,I.isEmpty)(t))return(0,I.map)(r,(function(e){return{formId:e.formId,id:e.id||"",pkt:0,m:0,w:0,r:0,p:0,brPlus:0,brMinus:0,brDiff:0}}));var e=(0,I.map)(r,(function(e){var r=o(e.id);return{formId:e.formId,id:e.id||"",pkt:(0,I.reduce)(r,(function(e,r){return e+r.pkt}),0),m:(0,I.size)(r),w:(0,I.size)((0,I.filter)(r,{status:T.Qk.W})),r:(0,I.size)((0,I.filter)(r,{status:T.Qk.D})),p:(0,I.size)((0,I.filter)(r,{status:T.Qk.L})),brPlus:(0,I.reduce)(r,(function(e,r){return e+r.plus}),0),brMinus:(0,I.reduce)(r,(function(e,r){return e+r.minus}),0),brDiff:(0,I.reduce)(r,(function(e,r){return e+r.diff}),0)}}));return(0,I.orderBy)(e,["pkt","brDiff","brPlus"],["desc","desc","desc"])}),[t,r,o]);return console.log(c,"result"),(0,B.jsx)(O.x,{className:a,children:(0,B.jsxs)(S.Z,{children:[(0,B.jsx)(F.Z,{children:(0,B.jsxs)(W.Z,{children:[(0,B.jsx)(_.p,{align:"left",children:l("Zawodnik")}),(0,B.jsx)(_.p,{width:50,className:"text-center",children:l("Pkt")}),(0,B.jsx)(_.p,{width:50,className:"text-center",children:l("M")}),(0,B.jsx)(_.p,{width:50,className:"text-center",children:l("W")}),(0,B.jsx)(_.p,{width:50,className:"text-center",children:l("R")}),(0,B.jsx)(_.p,{width:50,className:"text-center",children:l("P")}),(0,B.jsx)(_.p,{width:50,className:"text-center",children:l("Br+")}),(0,B.jsx)(_.p,{width:50,className:"text-center",children:l("Br-")}),(0,B.jsx)(_.p,{width:50,className:"text-center",children:l("+/-")})]})}),(0,B.jsx)(Q.Z,{children:(0,I.map)(c,(function(e,r){var t=e.formId,a=e.id,l=e.pkt,o=e.m,c=e.w,d=e.r,u=e.p,p=e.brPlus,m=e.brMinus,x=e.brDiff;return(0,B.jsxs)(W.Z,{style:{backgroundColor:n>r?C.Z[100]:q.Z[100]},children:[(0,B.jsx)(_.p,{component:"th",scope:"row",children:a?L(a,null===i||void 0===i?void 0:i.docs):(0,B.jsx)(E,{onAdd:function(){s(r)}})}),(0,B.jsx)(_.p,{component:"th",scope:"row",className:"text-center font-bold",children:l}),(0,B.jsx)(_.p,{component:"th",scope:"row",className:"text-center",children:o}),(0,B.jsx)(_.p,{component:"th",scope:"row",className:"text-center",children:c}),(0,B.jsx)(_.p,{component:"th",scope:"row",className:"text-center",children:d}),(0,B.jsx)(_.p,{component:"th",scope:"row",className:"text-center",children:u}),(0,B.jsx)(_.p,{component:"th",scope:"row",className:"text-center",children:p}),(0,B.jsx)(_.p,{component:"th",scope:"row",className:"text-center",children:m}),(0,B.jsx)(_.p,{component:"th",scope:"row",className:"text-center",children:x})]},t)}))})]})})}var H=g.memo(R),J=n(5953),K=n(9911),U=n(1872),X=n(1134),Y=n(7723),ee=n(5088);function re(e){var r=e.control,n=e.index,a=e.result,l=e.onAdd,i=e.typeOfWin,o=e.disabledPlayers,c=(0,k.qu)().data,u=(0,A.$)().t,p=(0,g.useState)(!1),m=(0,s.Z)(p,2),x=m[0],f=m[1],h=(0,g.useState)(!1),j=(0,s.Z)(h,2),y=j[0],v=j[1],Z=(0,g.useCallback)((function(){f(!1)}),[]),b=(0,g.useCallback)((function(){v(!1)}),[]),N=(0,X.qo)({control:r,name:"results.".concat(n,".playerA")}),w=(0,X.qo)({control:r,name:"results.".concat(n,".playerB")}),P=function(e,r){e&&r&&l&&(0,I.forEach)((0,I.range)(0,(0,ee.EQ)(i).with(Y.q.TwoMatch,(function(){return 2})).with(Y.q.Best3,(function(){return 3})).with(Y.q.Best5,(function(){return 5})).otherwise((function(){return 0}))),(function(){l({playerA:{id:e,score:""},playerB:{id:r,score:""}})}))},C=l&&(null===N||void 0===N?void 0:N.score)&&(null===w||void 0===w?void 0:w.score)&&(null===N||void 0===N?void 0:N.score)===(null===w||void 0===w?void 0:w.score),q=!(null!==N&&void 0!==N&&N.id)||!(null!==w&&void 0!==w&&w.id);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(J.ZP,{container:!0,className:"py-1 items-center",wrap:"nowrap",children:[(0,B.jsxs)(J.ZP,{item:!0,xs:5,className:"flex justify-end items-center",children:[(0,B.jsx)(X.Qr,{defaultValue:a.playerA.id,name:"results.".concat(n,".playerA.id"),control:r,render:function(e){var r=e.field,n=r.value,s=r.onChange;e.fieldState.error;return(0,B.jsx)("span",{className:"text-xs break-all",children:n?L(n,null===c||void 0===c?void 0:c.docs):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(E,{onAdd:function(){f(!0)}}),(0,B.jsx)(z,{onClose:Z,open:x,onPick:function(e){s(e.id),P(e.id,null===w||void 0===w?void 0:w.id)},disabledPlayers:o})]})})}}),C&&(0,B.jsx)(X.Qr,{defaultValue:a.playerB.score,name:"results.".concat(n,".playerA.penaltyScore"),control:r,render:function(e){var r=e.field;e.fieldState.error;return(0,B.jsx)(K.Z,(0,t.Z)((0,t.Z)({disabled:q,inputProps:{className:"p-1 text-center text-xs"}},r),{},{className:"mx-1 w-10",size:"small",type:"number",variant:"filled",placeholder:u("kr.")}))}})]}),(0,B.jsx)(J.ZP,{item:!0,children:(0,B.jsxs)(d.Z,{className:"flex flex-nowrap",children:[(0,B.jsx)(X.Qr,{defaultValue:a.playerA.score,name:"results.".concat(n,".playerA.score"),control:r,render:function(e){var r=e.field;e.fieldState.error;return(0,B.jsx)(K.Z,(0,t.Z)((0,t.Z)({disabled:q,inputProps:{className:"p-1 text-center"}},r),{},{className:"mx-1 w-10",size:"small",type:"number",variant:"outlined"}))}}),":",(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(X.Qr,{defaultValue:a.playerB.score,name:"results.".concat(n,".playerB.score"),control:r,render:function(e){var r=e.field;e.fieldState.error;return(0,B.jsx)(K.Z,(0,t.Z)((0,t.Z)({disabled:q,inputProps:{className:"p-1 text-center"}},r),{},{className:"mx-1 w-10",size:"small",type:"number",variant:"outlined"}))}}),C&&(0,B.jsx)(X.Qr,{defaultValue:a.playerB.score,name:"results.".concat(n,".playerB.penaltyScore"),control:r,render:function(e){var r=e.field;e.fieldState.error;return(0,B.jsx)(K.Z,(0,t.Z)((0,t.Z)({disabled:q,inputProps:{className:"p-1 text-center text-xs"}},r),{},{className:"mx-1 w-10",size:"small",type:"number",variant:"filled",placeholder:u("kr.")}))}})]})]})}),(0,B.jsx)(J.ZP,{item:!0,className:"flex justify-start items-center",xs:5,children:(0,B.jsx)(X.Qr,{defaultValue:a.playerB.id,name:"results.".concat(n,".playerB.id"),control:r,render:function(e){var r=e.field,n=r.value,s=r.onChange;e.fieldState.error;return(0,B.jsx)("span",{className:"text-xs break-all",children:n?L(n,null===c||void 0===c?void 0:c.docs):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(E,{onAdd:function(){v(!0)}}),(0,B.jsx)(z,{onClose:b,open:y,onPick:function(e){s(e.id),P(null===N||void 0===N?void 0:N.id,e.id)},disabledPlayers:o})]})})}})})]}),(0,B.jsx)(U.Z,{})]})}var ne=g.memo(re),se=n(8163),te=n(6595),ae=n(9001),le=["children","value","index"];function ie(e){var r=e.children,n=e.value,s=e.index,l=(0,a.Z)(e,le);return(0,B.jsx)("div",(0,t.Z)((0,t.Z)({role:"tabpanel",hidden:n!==s,id:"simple-tabpanel-".concat(s)},l),{},{children:n===s&&(0,B.jsx)(d.Z,{sx:{p:3},children:(0,B.jsx)(m.Z,{children:r})})}))}var oe={playerCount:3,promotion:1,typeOfWin:Y.q.OneMatch};var ce=function(){var e=(0,g.useState)("Faza grupowa"),r=(0,s.Z)(e,2),n=r[0],t=r[1],a=((0,k.qu)().data,(0,g.useState)(!1)),m=(0,s.Z)(a,2),x=m[0],f=m[1],h=(0,g.useState)(null),j=(0,s.Z)(h,2),y=j[0],v=j[1],Z=(0,g.useCallback)((function(e){v(e),f(!0)}),[]),b=(0,X.cI)(),N=b.control,w=(b.handleSubmit,b.reset),P=(b.register,b.setValue,b.watch,(0,X.Dq)({control:N,name:"players",keyName:"formId"})),C=P.fields,q=(P.append,P.prepend,P.remove,P.swap,P.move,P.update),S=(0,X.Dq)({control:N,name:"results",keyName:"formId"}),Q=S.fields,F=S.replace,W=(0,X.Dq)({control:N,name:"results2",keyName:"formId"}),D=W.fields,M=(W.insert,W.append);(0,g.useEffect)((function(){w({players:(0,I.map)((0,I.range)(0,oe.playerCount),(function(){return{id:"",firstName:"",lastName:""}})),results:[],results2:[{playerA:{id:"",score:""},playerB:{id:"",score:""}},{playerA:{id:"",score:""},playerB:{id:"",score:""}},{playerA:{id:"",score:""},playerB:{id:"",score:""}},{playerA:{id:"",score:""},playerB:{id:"",score:""}},{playerA:{id:"",score:""},playerB:{id:"",score:""}},{playerA:{id:"",score:""},playerB:{id:"",score:""}},{playerA:{id:"",score:""},playerB:{id:"",score:""}},{playerA:{id:"",score:""},playerB:{id:"",score:""}}]})}),[w]),(0,se.Z)((function(){if((0,I.isEmpty)((0,I.filter)(C,(function(e){return!e.id})))){var e=(0,I.map)((0,I.combinations)(C,2),(function(e){var r=(0,s.Z)(e,2),n=r[0],t=r[1];return{playerA:{id:n.id||"",score:""},playerB:{id:t.id||"",score:""}}}));F(oe.typeOfWin===Y.q.TwoMatch?(0,I.concat)(e,(0,I.map)(e,(function(e){var r=e.playerA;return{playerA:e.playerB,playerB:r}}))):e)}console.log(C,"fields")}),[C]),console.log("results","results");var V=(0,X.qo)({control:N,name:"results"});console.log(V,"resultsValues"),console.log(C,"players");var E=(0,A.$)().t,O=(0,g.useCallback)((function(){v(null),f(!1)}),[]),T=(0,g.useCallback)((function(e){q(y,{id:e.id,firstName:e.firstName,lastName:e.lastName}),O()}),[O,y,q]),$=(0,g.useMemo)((function(){return(0,I.compact)((0,I.map)(C,"id"))}),[C]);return console.log(Q,"results"),console.log(D,"results2"),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(z,{onClose:O,open:x,onPick:T,disabledPlayers:$}),(0,B.jsxs)(l.Z,{children:[(0,B.jsxs)(p.Z,{value:n,onChange:function(e,r){t(r)},variant:"scrollable",children:[(0,B.jsx)(u.Z,{label:"Faza grupowa",value:"Faza grupowa"}),(0,B.jsx)(u.Z,{label:"1/8",value:"1/8"}),(0,B.jsx)(u.Z,{label:"1/4",value:"1/4"}),(0,B.jsx)(u.Z,{label:"1/2",value:"1/2"}),(0,B.jsx)(u.Z,{label:"mecz o 3.",value:"mecz o 3."}),(0,B.jsx)(u.Z,{label:"Fina\u0142",value:"Fina\u0142"})]}),(0,B.jsxs)(ie,{value:n,index:"Faza grupowa",children:[(0,B.jsxs)(i.Z,{variant:"outlined",children:[(0,B.jsx)(o.Z,{variant:"contained",size:"small",children:"Grupa A"}),(0,B.jsx)(o.Z,{size:"small",children:"Grupa B"}),(0,B.jsx)(o.Z,{size:"small",children:"Grupa C"})]}),(0,B.jsx)(H,{className:"my-2",players:C,onAddPlayer:Z,promotion:1,results:V}),(0,B.jsxs)(d.Z,{children:[(0,I.isEmpty)(Q)&&(0,B.jsx)(c.Z,{severity:"info",variant:"standard",children:E("Wprowad\u017a wszystkich graczy aby wygenerowa\u0107 terminarz")}),(0,I.map)(Q,(function(e,r){return e.playerA.id&&e.playerB.id&&(0,B.jsx)(ne,{control:N,index:r,result:e},e.formId)}))]})]}),(0,B.jsx)(ie,{value:n,index:"1/8",children:(0,I.map)(D,(function(e,r){return(0,B.jsx)(ne,{disabledPlayers:$,typeOfWin:oe.typeOfWin,control:N,index:r,result:e,onAdd:function(e){M(e)}},e.formId)}))}),(0,B.jsx)(ie,{value:n,index:"1/4",children:"Item Three"}),(0,B.jsx)(ie,{value:n,index:"1/2",children:"Item Three"}),(0,B.jsx)(ie,{value:n,index:"mecz o 3.",children:"Item Three"}),(0,B.jsx)(ie,{value:n,index:"Fina\u0142",children:"Item Three"}),(0,B.jsxs)(d.Z,{className:"px-6 pb-4",children:[(0,B.jsx)(o.Z,{onClick:function(){},startIcon:(0,B.jsx)(ae.Z,{}),color:"primary",children:E("Zako\u0144cz turniej")}),(0,B.jsx)(o.Z,{onClick:function(){},startIcon:(0,B.jsx)(te.Z,{}),color:"primary",children:E("Wystartuj turniej")})]})]})]})}}}]);
//# sourceMappingURL=398.6867c2f5.chunk.js.map