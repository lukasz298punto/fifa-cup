"use strict";(self.webpackChunkfifa_cup=self.webpackChunkfifa_cup||[]).push([[208],{3208:function(e,n,a){a.r(n),a.d(n,{default:function(){return Pe}});var r=a(4165),t=a(5861),s=a(1413),o=a(9439),l=a(6843),i=a(6595),c=a(3329),d=a(9001),u=a(6580),m=a(6650),p=a(1091),x=a(228),f=a(166),h=a(142),j=a(8506),v=a(9276),y=a(8182),Z=a(184);var N=function(e){var n=e.children,a=e.value,r=e.index,t=e.className;return(0,Z.jsx)("div",{className:(0,y.Z)(a!==r&&"hidden"),children:(0,Z.jsx)(v.Z,{className:t,children:n})})},g=a(4259),b=a(6386),w=a(7708),C=a(763),k=(a(1361),a(6582)),P=a(2791),S=a(3168),A=a(1508),z=a(501),D=a(3978),B=a(5419),M=a(2637),q=a(464),E=a(5629),I=a(6132),F=a(9562),W=a(4346);function Q(e){var n=e.onClose,a=e.onPick,r=e.disabledPlayers,t=e.open,o=(0,w.qu)(),l=o.data,i=o.isLoading,c=(0,S.$)().t;return(0,Z.jsx)(M.Z,{onClose:n,open:t,children:(0,Z.jsxs)(j.g,{loading:i,children:[(0,Z.jsx)(q.Z,{children:c("Wybierz zawodnika")}),(0,Z.jsx)(E.Z,{sx:{pt:0},children:(0,C.map)(null===l||void 0===l?void 0:l.docs,(function(e){var n=e.data();return(0,Z.jsxs)(I.ZP,{disabled:(0,C.includes)(r,e.id),button:!0,onClick:function(){return a((0,s.Z)((0,s.Z)({},n),{},{id:e.id}))},children:[(0,Z.jsx)(F.Z,{children:(0,Z.jsx)(D.Z,{sx:{bgcolor:B.Z[100],color:B.Z[600]},children:(0,Z.jsx)(z.Z,{})})}),(0,Z.jsx)(W.Z,{primary:n.firstName+" "+n.lastName})]},e.id)}))})]})})}var O=P.memo(Q),G=a(4942),V=a(277),$=a(1487),L=a(6815),U=a(1680),X=a(9773),H=a(9827),R=a(807),T=a(5987),Y=a(3811),_=a(8439),J=["onAdd"];var K=function(e){var n=e.onAdd,a=(0,T.Z)(e,J);return(0,Z.jsx)(Y.Z,(0,s.Z)((0,s.Z)({className:"p-0",size:"small",color:"primary",onClick:n},a),{},{children:(0,Z.jsx)(_.Z,{})}))},ee=a(4337),ne=a(7110),ae=a(2400),re=a(7539),te=a(1745),se=(0,V.ZP)(re.p)((function(e){var n;e.theme;return n={},(0,G.Z)(n,"&.".concat(te.Z.head),{fontSize:11,padding:6}),(0,G.Z)(n,"&.".concat(te.Z.body),{fontSize:11,padding:6}),n}));function oe(e){var n=e.players,a=e.promotion,r=e.onAddPlayer,t=e.results,s=e.className,o=e.allActivePlayers,l=(0,S.$)().t,i=(0,P.useMemo)((function(){return(0,C.isEmpty)(t)?(0,C.map)(n,(function(e){return{id:e.id||"",pkt:0,m:0,w:0,r:0,p:0,brPlus:0,brMinus:0,brDiff:0}})):(0,ne.EC)((0,C.map)(n,"id"),t)}),[t,n]);return(0,Z.jsx)(ee.x,{className:s,children:(0,Z.jsxs)(U.Z,{children:[(0,Z.jsx)(H.Z,{children:(0,Z.jsxs)(R.Z,{children:[(0,Z.jsx)(se,{align:"left",children:l("Zawodnik")}),(0,Z.jsx)(se,{width:50,className:"text-center",children:l("Pkt")}),(0,Z.jsx)(se,{width:50,className:"text-center",children:l("M")}),(0,Z.jsx)(se,{width:50,className:"text-center",children:l("W")}),(0,Z.jsx)(se,{width:50,className:"text-center",children:l("R")}),(0,Z.jsx)(se,{width:50,className:"text-center",children:l("P")}),(0,Z.jsx)(se,{width:50,className:"text-center",children:l("Br+")}),(0,Z.jsx)(se,{width:50,className:"text-center",children:l("Br-")}),(0,Z.jsx)(se,{width:50,className:"text-center",children:l("+/-")})]})}),(0,Z.jsx)(X.Z,{children:(0,C.map)(i,(function(e,n){var t=e.id,s=e.pkt,l=e.m,i=e.w,c=e.r,d=e.p,u=e.brPlus,m=e.brMinus,p=e.brDiff;return(0,Z.jsxs)(R.Z,{style:{backgroundColor:a>n?$.Z[100]:L.Z[100]},children:[(0,Z.jsx)(se,{component:"th",scope:"row",children:t?(0,ae.MX)(t,o):(0,Z.jsx)(K,{onAdd:function(){r(n)}})}),(0,Z.jsx)(se,{component:"th",scope:"row",className:"text-center font-bold",children:s}),(0,Z.jsx)(se,{component:"th",scope:"row",className:"text-center",children:l}),(0,Z.jsx)(se,{component:"th",scope:"row",className:"text-center",children:i}),(0,Z.jsx)(se,{component:"th",scope:"row",className:"text-center",children:c}),(0,Z.jsx)(se,{component:"th",scope:"row",className:"text-center",children:d}),(0,Z.jsx)(se,{component:"th",scope:"row",className:"text-center",children:u}),(0,Z.jsx)(se,{component:"th",scope:"row",className:"text-center",children:m}),(0,Z.jsx)(se,{component:"th",scope:"row",className:"text-center",children:p})]},t)}))})]})})}var le=P.memo(oe),ie=a(3950),ce=a(5953),de=a(9911),ue=a(1872),me=a(1134),pe=a(5088),xe=a(7723);function fe(e){var n=e.control,a=e.result,r=e.onAdd,t=e.typeOfWin,s=e.disabledPlayers,l=e.formName,i=e.isGroup,c=void 0!==i&&i,d=(0,w.qu)().data,u=(0,S.$)().t,m=(0,P.useState)(!1),p=(0,o.Z)(m,2),f=p[0],h=p[1],j=(0,P.useState)(!1),v=(0,o.Z)(j,2),y=v[0],N=v[1],g=(0,w.DH)(),b=(0,P.useCallback)((function(){h(!1)}),[]),k=(0,P.useCallback)((function(){N(!1)}),[]),A=function(e){return"".concat(l,".").concat(e)},z=(0,me.qo)({control:n,name:A("playerA")}),D=(0,me.qo)({control:n,name:A("playerB")}),B=function(e,n){e&&n&&r&&(0,C.forEach)((0,C.range)(0,(0,pe.EQ)(t).with(xe.q.TwoMatch,(function(){return 1})).otherwise((function(){return 0}))),(function(){r({playerA:{id:e,score:""},playerB:{id:n,score:""}})}))},M=!(null!==z&&void 0!==z&&z.id)||!(null!==D&&void 0!==D&&D.id);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(ce.ZP,{container:!0,className:"py-1 items-center",wrap:"nowrap",children:[(0,Z.jsxs)(ce.ZP,{item:!0,xs:5,className:"flex justify-end items-center",children:[(0,Z.jsx)(me.Qr,{defaultValue:a.playerA.id,name:A("playerA.id"),control:n,render:function(e){var n=e.field,a=n.value,r=n.onChange;return(0,Z.jsx)("span",{className:"text-xs break-words text-right",children:!a&&g?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(K,{onAdd:function(){h(!0)}}),(0,Z.jsx)(O,{onClose:b,open:f,onPick:function(e){r(e.id),B(e.id,null===D||void 0===D?void 0:D.id)},disabledPlayers:s})]}):(0,Z.jsxs)("span",{className:"flex items-center",children:[!c&&g&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(O,{onClose:b,open:f,onPick:function(e){r(e.id),b()},disabledPlayers:s}),(0,Z.jsx)(Y.Z,{className:"p-0",size:"small",color:"primary",onClick:function(){h(!0)},children:(0,Z.jsx)(ie.Z,{})})]}),(0,ae.MX)(a,null===d||void 0===d?void 0:d.docs)]})})}}),!c&&(0,Z.jsx)(me.Qr,{defaultValue:a.playerB.penaltyScore||"",name:A("playerA.penaltyScore"),control:n,render:function(e){var n=e.field,a=n.onChange,r=n.value;return g?(0,Z.jsx)(de.Z,{disabled:M,inputProps:{className:"p-1 text-center text-xs"},value:r,onChange:function(e){a((0,ae.Pw)(e.target.value))},className:"mx-1 w-8",size:"small",type:"number",variant:"filled",placeholder:u("kr.")}):(0,Z.jsx)("span",{className:"text-xs ml-1 mb-[7px] -mr-[3px] opacity-15",children:r})}})]}),(0,Z.jsx)(ce.ZP,{item:!0,children:(0,Z.jsxs)(x.Z,{className:"flex flex-nowrap",children:[(0,Z.jsx)(me.Qr,{defaultValue:a.playerA.score,name:A("playerA.score"),control:n,render:function(e){var n=e.field,a=n.onChange,r=n.value;return g?(0,Z.jsx)(de.Z,{autoComplete:"off",disabled:M,inputProps:{className:"p-1 text-center"},value:r,onChange:function(e){a((0,ae.Pw)(e.target.value))},className:"mx-1 w-8",size:"small",type:"number",variant:"outlined"}):(0,Z.jsx)("span",{className:"mx-1 font-bold",children:r})}}),":",(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(me.Qr,{defaultValue:a.playerB.score,name:A("playerB.score"),control:n,render:function(e){var n=e.field,a=n.onChange,r=n.value;return g?(0,Z.jsx)(de.Z,{autoComplete:"off",disabled:M,inputProps:{className:"p-1 text-center"},value:r,onChange:function(e){a((0,ae.Pw)(e.target.value))},className:"mx-1 w-8",size:"small",type:"number",variant:"outlined"}):(0,Z.jsx)("span",{className:"mx-1 font-bold",children:r})}})})]})}),(0,Z.jsxs)(ce.ZP,{item:!0,className:"flex justify-start items-center",xs:5,children:[!c&&(0,Z.jsx)(me.Qr,{defaultValue:a.playerB.penaltyScore||"",name:A("playerB.penaltyScore"),control:n,render:function(e){var n=e.field,a=n.onChange,r=n.value;return g?(0,Z.jsx)(de.Z,{autoComplete:"off",disabled:M,inputProps:{className:"p-1 text-center text-xs"},value:r,onChange:function(e){a((0,ae.Pw)(e.target.value))},className:"mx-1 w-8",size:"small",type:"number",variant:"filled",placeholder:u("kr.")}):(0,Z.jsx)("span",{className:"text-xs mr-1 mb-[7px] -ml-[3px] opacity-15",children:r})}}),(0,Z.jsx)(me.Qr,{defaultValue:a.playerB.id,name:A("playerB.id"),control:n,render:function(e){var n=e.field,a=n.value,r=n.onChange;return(0,Z.jsx)("span",{className:"text-xs break-words",children:!a&&g?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(K,{onAdd:function(){N(!0)}}),(0,Z.jsx)(O,{onClose:k,open:y,onPick:function(e){r(e.id),B(null===z||void 0===z?void 0:z.id,e.id)},disabledPlayers:s})]}):(0,Z.jsxs)("span",{className:"flex items-center",children:[(0,ae.MX)(a,null===d||void 0===d?void 0:d.docs),!c&&g&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(O,{onClose:k,open:y,onPick:function(e){r(e.id),k()},disabledPlayers:s}),(0,Z.jsx)(Y.Z,{className:"p-0",size:"small",color:"primary",onClick:function(){N(!0)},children:(0,Z.jsx)(ie.Z,{})})]})]})})}})]})]}),(0,Z.jsx)(ue.Z,{})]})}var he=P.memo(fe),je=a(8163);function ve(e){var n=e.control,a=e.typeOfWin,r=e.promotion,t=e.index,s=e.phaseIndex,l=(0,S.$)().t,i=(0,w.qu)(),c=i.data,d=i.isLoading,m=(0,me.Dq)({control:n,name:"phases.".concat(s,".groups.").concat(t,".players"),keyName:"formId"}),p=m.fields,f=m.update,h=(0,me.Dq)({control:n,name:"phases.".concat(s,".groups.").concat(t,".results"),keyName:"formId"}),j=h.fields,v=h.replace,y=(0,P.useState)(null),N=(0,o.Z)(y,2),g=N[0],b=N[1],k=(0,P.useCallback)((function(e){b(e),M(!0)}),[]),z=(0,P.useState)(!1),D=(0,o.Z)(z,2),B=D[0],M=D[1],q=(0,P.useCallback)((function(){b(null),M(!1)}),[]),E=(0,P.useMemo)((function(){return(0,C.compact)((0,C.map)(p,"id"))}),[p]),I=(0,me.qo)({control:n,name:"phases.".concat(s,".groups.").concat(t,".results")}),F=(0,P.useCallback)((function(e){f(g,{id:e.id,firstName:e.firstName,lastName:e.lastName}),q()}),[q,g,f]);return(0,je.Z)((function(){if((0,C.isEmpty)((0,C.filter)(p,(function(e){return!e.id})))&&(0,C.isEmpty)(j)){var e=(0,C.shuffle)((0,C.map)((0,C.combinations)(p,2),(function(e){var n=(0,o.Z)(e,2),a=n[0],r=n[1];return{playerA:{id:a.id||"",score:""},playerB:{id:r.id||"",score:""}}})));v(a===xe.q.TwoMatch?(0,C.concat)(e,(0,C.map)(e,(function(e){var n=e.playerA;return{playerA:e.playerB,playerB:n}}))):e)}}),[p]),d?(0,Z.jsx)(u.Z,{size:24,className:"mt-2"}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(O,{onClose:q,open:B,onPick:F,disabledPlayers:E}),(0,Z.jsx)(le,{allActivePlayers:null===c||void 0===c?void 0:c.docs,className:"my-2",players:p,onAddPlayer:k,promotion:r,results:I}),(0,Z.jsxs)(x.Z,{children:[(0,C.isEmpty)(j)&&(0,Z.jsx)(A.Z,{severity:"info",variant:"standard",children:l("Wprowad\u017a wszystkich graczy aby wygenerowa\u0107 terminarz")}),(0,C.map)(j,(function(e,a){return e.playerA.id&&e.playerB.id&&(0,Z.jsx)(he,{isGroup:!0,control:n,result:e,formName:"phases.".concat(s,".groups.").concat(t,".results.").concat(a)},e.formId)}))]})]})}var ye=P.memo(ve);function Ze(e){var n=e.schema,a=e.index,r=e.control,t=(0,P.useState)("0"),s=(0,o.Z)(t,2),l=s[0],i=s[1],c=(0,S.$)().t,d=n.phases[a];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(k.Z,{variant:"outlined",children:(0,C.map)(d.groups,(function(e,n){return(0,Z.jsxs)(p.Z,{variant:l===String(n)?"contained":"outlined",size:"small",onClick:function(){return function(e){i(e)}(String(n))},children:[c("Grupa")," ",g.CR[n]]},n)}))}),(0,C.map)(d.groups,(function(e,n){return(0,Z.jsx)(N,{value:l,index:String(n),children:(0,Z.jsx)(ye,{control:r,typeOfWin:d.typeOfWin,promotion:e.promotion,index:n,phaseIndex:a})},n)}))]})}var Ne=P.memo(Ze),ge=a(3433);function be(e){var n=e.schema,a=e.index,r=e.control,t=(0,me.Dq)({control:r,name:"phases.".concat(a,".results"),keyName:"formId"}),s=t.fields,o=t.append,l=(t.replace,n.phases[a]),i=(0,me.qo)({control:r,name:"phases.".concat(a,".results")}),c=(0,P.useCallback)((function(e){o(e)}),[o]),d=(0,P.useMemo)((function(){return(0,C.compact)([].concat((0,ge.Z)((0,C.flatMap)(i,"playerA.id")),(0,ge.Z)((0,C.flatMap)(i,"playerB.id"))))}),[i]);return(0,Z.jsx)(Z.Fragment,{children:(0,C.map)(s,(function(e,n){return(0,Z.jsx)(he,{formName:"phases.".concat(a,".results.").concat(n),disabledPlayers:d,typeOfWin:l.typeOfWin,control:r,result:e,onAdd:c},e.formId)}))})}var we,Ce=P.memo(be),ke=a(7689);!function(e){e[e.End=0]="End",e[e.Update=1]="Update",e[e.Start=2]="Start"}(we||(we={}));var Pe=function(){var e=(0,ke.UO)().id,n=(0,P.useState)("0"),a=(0,o.Z)(n,2),v=a[0],y=a[1],k=(0,w.oQ)(e),A=k.mutate,z=k.isLoading,D=(0,S.$)().t,B=(0,w.DH)(),M=(0,w.C5)(e),q=M.data,E=M.isLoading,I=(0,P.useMemo)((function(){return null===q||void 0===q?void 0:q.data()}),[q]),F=(0,w.wp)(null===I||void 0===I?void 0:I.schemaId),W=F.data,Q=F.isLoading,O=(0,P.useMemo)((function(){return null===W||void 0===W?void 0:W.data()}),[W]),G=(0,me.cI)(),V=G.control,$=G.handleSubmit,L=G.reset;(0,P.useEffect)((function(){I&&O&&(null!==I&&void 0!==I&&I.phases?L(I):L((0,s.Z)((0,s.Z)({},I),{},{phases:(0,C.map)(null===O||void 0===O?void 0:O.phases,(function(e){return e.isGroupStage===xe.Y.GroupStage?{groups:(0,C.map)(null===e||void 0===e?void 0:e.groups,(function(e){return{players:(0,C.map)((0,C.range)(0,e.playerCount),(function(){return{id:"",firstName:"",lastName:""}})),results:[]}}))}:{results:(0,C.map)((0,C.range)(0,Number(e.pairCount)||0),(function(){return{playerA:{id:"",score:""},playerB:{id:"",score:""}}}))}}))})))}),[L,I,O]);var U=(0,P.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we.Update;return function(){$(function(){var n=(0,t.Z)((0,r.Z)().mark((function n(a){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log(a),A((0,s.Z)((0,s.Z)({},a),{},{startDate:e===we.Start?(0,b.Z)(new Date,g.dq):a.startDate,endDate:e===we.End?(0,b.Z)(new Date,g.dq):a.endDate})),console.log(a,"data");case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(e){console.log(e)}))()}}),[$,A]);return E||Q?(0,Z.jsx)(u.Z,{size:24}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(x.Z,{children:[(0,Z.jsx)(l.Z,{className:"text-xs mr-1"}),(0,Z.jsx)("span",{className:"text-xs",children:null===I||void 0===I?void 0:I.name}),(null===I||void 0===I?void 0:I.endDate)&&(0,Z.jsxs)("span",{className:"text-xs ml-1",children:["(",D("Zako\u0144czony"),")"]})]}),(0,Z.jsxs)(m.Z,{children:[(0,Z.jsx)(h.Z,{value:v,onChange:function(e,n){y(n)},variant:"scrollable",children:(0,C.map)(null===O||void 0===O?void 0:O.phases,(function(e,n){return(0,Z.jsx)(f.Z,{label:e.name,value:String(n)},n)}))}),O&&(0,C.map)(null===O||void 0===O?void 0:O.phases,(function(e,n){return(0,Z.jsx)(N,{value:v,index:String(n),className:"p-3",children:e.isGroupStage===xe.Y.Cup?(0,Z.jsx)(Ce,{schema:O,index:n,control:V}):(0,Z.jsx)(Ne,{schema:O,index:n,control:V})},n)})),(0,Z.jsxs)(x.Z,{className:"px-6 pb-4 flex",children:[B&&(null===I||void 0===I?void 0:I.startDate)&&!(null!==I&&void 0!==I&&I.endDate)&&(0,Z.jsx)(p.Z,{onClick:U(we.End),startIcon:(0,Z.jsx)(d.Z,{}),color:"primary",children:D("Zako\u0144cz turniej")}),B&&!(null!==I&&void 0!==I&&I.startDate)&&!(null!==I&&void 0!==I&&I.endDate)&&(0,Z.jsx)(p.Z,{onClick:U(we.Start),startIcon:(0,Z.jsx)(i.Z,{}),color:"primary",children:D("Wystartuj turniej")}),B&&(0,Z.jsx)(j.g,{loading:z,children:(0,Z.jsx)(p.Z,{onClick:U(),startIcon:(0,Z.jsx)(c.Z,{}),color:"primary",children:D("Zapisz zmiany")})})]})]})]})}}}]);
//# sourceMappingURL=208.87967967.chunk.js.map