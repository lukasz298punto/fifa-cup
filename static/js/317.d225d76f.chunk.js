"use strict";(self.webpackChunkfifa_cup=self.webpackChunkfifa_cup||[]).push([[317],{9317:function(e,n,r){r.r(n),r.d(n,{default:function(){return je}});var t=r(4165),s=r(5861),a=r(1413),o=r(9439),i=r(6650),l=r(1091),c=r(228),d=r(166),u=r(4293),p=r(2246),m=r(763),f=(r(1361),r(2791)),x=r(1134),h=r(3168),v=r(7723),j=r(6595),y=r(9001),Z=r(7689),N=r(8506),b=r(6582),k=r(9276),w=r(8182),g=r(184);var C=function(e){var n=e.children,r=e.value,t=e.index,s=e.className;return(0,g.jsx)("div",{className:(0,w.Z)(r!==t&&"hidden"),children:(0,g.jsx)(k.Z,{className:s,children:n})})},I=r(4259),P=r(1508),A=r(501),S=r(3978),B=r(5419),z=r(788),q=r(464),D=r(5629),Q=r(6132),M=r(9562),W=r(4346);function O(e){var n=e.onClose,r=e.onPick,t=e.disabledPlayers,s=e.open,o=(0,p.qu)(),i=o.data,l=o.isLoading,c=(0,h.$)().t;return(0,g.jsx)(z.Z,{onClose:n,open:s,children:(0,g.jsxs)(N.g,{loading:l,children:[(0,g.jsx)(q.Z,{children:c("Wybierz zawodnika")}),(0,g.jsx)(D.Z,{sx:{pt:0},children:(0,m.map)(null===i||void 0===i?void 0:i.docs,(function(e){var n=e.data();return(0,g.jsxs)(Q.ZP,{disabled:(0,m.includes)(t,e.id),button:!0,onClick:function(){return r((0,a.Z)((0,a.Z)({},n),{},{id:e.id}))},children:[(0,g.jsx)(M.Z,{children:(0,g.jsx)(S.Z,{sx:{bgcolor:B.Z[100],color:B.Z[600]},children:(0,g.jsx)(A.Z,{})})}),(0,g.jsx)(W.Z,{primary:n.firstName+" "+n.lastName})]},e.id)}))})]})})}var F=f.memo(O),V=r(1487),E=r(6815),$=r(1680),L=r(9773),G=r(9827),R=r(807),T=r(5987),_=r(3811),U=r(8439),Y=["onAdd"];var H=function(e){var n=e.onAdd,r=(0,T.Z)(e,Y);return(0,g.jsx)(_.Z,(0,a.Z)((0,a.Z)({className:"p-0",size:"small",color:"primary",onClick:n},r),{},{children:(0,g.jsx)(U.Z,{})}))},J=r(4337),K=function(e){return 0===e?I.Qk.D:e>0?I.Qk.W:I.Qk.L},X=function(e){return 0===e?1:e>0?3:0},ee=function(e,n){var r;if(e){var t=null===(r=(0,m.find)(n,{id:e}))||void 0===r?void 0:r.data();return(null===t||void 0===t?void 0:t.firstName)+" "+(null===t||void 0===t?void 0:t.lastName)}},ne=r(7539);function re(e){var n=e.players,r=e.promotion,t=e.onAddPlayer,s=e.results,a=e.className,o=(0,h.$)().t,i=(0,p.qu)().data,l=(0,f.useCallback)((function(e){return(0,m.reduce)(s,(function(n,r){var t=r.playerA,s=r.playerB;if(t.score&&s.score){if(t.id===e)return(0,m.concat)(n,{status:K(parseInt(t.score)-parseInt(s.score)),plus:parseInt(t.score),minus:parseInt(s.score),diff:parseInt(t.score)-parseInt(s.score),pkt:X(parseInt(t.score)-parseInt(s.score))});if(s.id===e)return(0,m.concat)(n,{status:K(parseInt(s.score)-parseInt(t.score)),plus:parseInt(s.score),minus:parseInt(t.score),diff:parseInt(s.score)-parseInt(t.score),pkt:X(parseInt(s.score)-parseInt(t.score))})}return n}),[])}),[s]),c=(0,f.useMemo)((function(){if((0,m.isEmpty)(s))return(0,m.map)(n,(function(e){return{formId:e.formId,id:e.id||"",pkt:0,m:0,w:0,r:0,p:0,brPlus:0,brMinus:0,brDiff:0}}));var e=(0,m.map)(n,(function(e){var n=l(e.id);return{formId:e.formId,id:e.id||"",pkt:(0,m.reduce)(n,(function(e,n){return e+n.pkt}),0),m:(0,m.size)(n),w:(0,m.size)((0,m.filter)(n,{status:I.Qk.W})),r:(0,m.size)((0,m.filter)(n,{status:I.Qk.D})),p:(0,m.size)((0,m.filter)(n,{status:I.Qk.L})),brPlus:(0,m.reduce)(n,(function(e,n){return e+n.plus}),0),brMinus:(0,m.reduce)(n,(function(e,n){return e+n.minus}),0),brDiff:(0,m.reduce)(n,(function(e,n){return e+n.diff}),0)}}));return(0,m.orderBy)(e,["pkt","brDiff","brPlus"],["desc","desc","desc"])}),[s,n,l]);return(0,g.jsx)(J.x,{className:a,children:(0,g.jsxs)($.Z,{children:[(0,g.jsx)(G.Z,{children:(0,g.jsxs)(R.Z,{children:[(0,g.jsx)(ne.p,{align:"left",children:o("Zawodnik")}),(0,g.jsx)(ne.p,{width:50,className:"text-center",children:o("Pkt")}),(0,g.jsx)(ne.p,{width:50,className:"text-center",children:o("M")}),(0,g.jsx)(ne.p,{width:50,className:"text-center",children:o("W")}),(0,g.jsx)(ne.p,{width:50,className:"text-center",children:o("R")}),(0,g.jsx)(ne.p,{width:50,className:"text-center",children:o("P")}),(0,g.jsx)(ne.p,{width:50,className:"text-center",children:o("Br+")}),(0,g.jsx)(ne.p,{width:50,className:"text-center",children:o("Br-")}),(0,g.jsx)(ne.p,{width:50,className:"text-center",children:o("+/-")})]})}),(0,g.jsx)(L.Z,{children:(0,m.map)(c,(function(e,n){var s=e.formId,a=e.id,o=e.pkt,l=e.m,c=e.w,d=e.r,u=e.p,p=e.brPlus,m=e.brMinus,f=e.brDiff;return(0,g.jsxs)(R.Z,{style:{backgroundColor:r>n?V.Z[100]:E.Z[100]},children:[(0,g.jsx)(ne.p,{component:"th",scope:"row",children:a?ee(a,null===i||void 0===i?void 0:i.docs):(0,g.jsx)(H,{onAdd:function(){t(n)}})}),(0,g.jsx)(ne.p,{component:"th",scope:"row",className:"text-center font-bold",children:o}),(0,g.jsx)(ne.p,{component:"th",scope:"row",className:"text-center",children:l}),(0,g.jsx)(ne.p,{component:"th",scope:"row",className:"text-center",children:c}),(0,g.jsx)(ne.p,{component:"th",scope:"row",className:"text-center",children:d}),(0,g.jsx)(ne.p,{component:"th",scope:"row",className:"text-center",children:u}),(0,g.jsx)(ne.p,{component:"th",scope:"row",className:"text-center",children:p}),(0,g.jsx)(ne.p,{component:"th",scope:"row",className:"text-center",children:m}),(0,g.jsx)(ne.p,{component:"th",scope:"row",className:"text-center",children:f})]},s)}))})]})})}var te=f.memo(re),se=r(5953),ae=r(9911),oe=r(1872),ie=r(5088);function le(e){var n=e.control,r=e.result,t=e.onAdd,s=e.typeOfWin,i=e.disabledPlayers,l=e.formName,d=(0,p.qu)().data,u=(0,h.$)().t,j=(0,f.useState)(!1),y=(0,o.Z)(j,2),Z=y[0],N=y[1],b=(0,f.useState)(!1),k=(0,o.Z)(b,2),w=k[0],C=k[1],I=(0,f.useCallback)((function(){N(!1)}),[]),P=(0,f.useCallback)((function(){C(!1)}),[]),A=function(e){return"".concat(l,".").concat(e)},S=(0,x.qo)({control:n,name:A("playerA")}),B=(0,x.qo)({control:n,name:A("playerB")}),z=function(e,n){e&&n&&t&&(0,m.forEach)((0,m.range)(0,(0,ie.EQ)(s).with(v.q.TwoMatch,(function(){return 2})).with(v.q.Best3,(function(){return 3})).with(v.q.Best5,(function(){return 5})).otherwise((function(){return 0}))),(function(){t({playerA:{id:e,score:""},playerB:{id:n,score:""}})}))},q=t&&(null===S||void 0===S?void 0:S.score)&&(null===B||void 0===B?void 0:B.score)&&(null===S||void 0===S?void 0:S.score)===(null===B||void 0===B?void 0:B.score),D=!(null!==S&&void 0!==S&&S.id)||!(null!==B&&void 0!==B&&B.id);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(se.ZP,{container:!0,className:"py-1 items-center",wrap:"nowrap",children:[(0,g.jsxs)(se.ZP,{item:!0,xs:5,className:"flex justify-end items-center",children:[(0,g.jsx)(x.Qr,{defaultValue:r.playerA.id,name:A("playerA.id"),control:n,render:function(e){var n=e.field,r=n.value,t=n.onChange;e.fieldState.error;return(0,g.jsx)("span",{className:"text-xs break-all",children:r?ee(r,null===d||void 0===d?void 0:d.docs):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(H,{onAdd:function(){N(!0)}}),(0,g.jsx)(F,{onClose:I,open:Z,onPick:function(e){t(e.id),z(e.id,null===B||void 0===B?void 0:B.id)},disabledPlayers:i})]})})}}),q&&(0,g.jsx)(x.Qr,{defaultValue:r.playerB.penaltyScore,name:A("playerA.penaltyScore"),control:n,render:function(e){var n=e.field;e.fieldState.error;return(0,g.jsx)(ae.Z,(0,a.Z)((0,a.Z)({disabled:D,inputProps:{className:"p-1 text-center text-xs"}},n),{},{className:"mx-1 w-10",size:"small",type:"number",variant:"filled",placeholder:u("kr.")}))}})]}),(0,g.jsx)(se.ZP,{item:!0,children:(0,g.jsxs)(c.Z,{className:"flex flex-nowrap",children:[(0,g.jsx)(x.Qr,{defaultValue:r.playerA.score,name:A("playerA.score"),control:n,render:function(e){var n=e.field;e.fieldState.error;return(0,g.jsx)(ae.Z,(0,a.Z)((0,a.Z)({disabled:D,inputProps:{className:"p-1 text-center"}},n),{},{className:"mx-1 w-10",size:"small",type:"number",variant:"outlined"}))}}),":",(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.Qr,{defaultValue:r.playerB.score,name:A("playerB.score"),control:n,render:function(e){var n=e.field;e.fieldState.error;return(0,g.jsx)(ae.Z,(0,a.Z)((0,a.Z)({disabled:D,inputProps:{className:"p-1 text-center"}},n),{},{className:"mx-1 w-10",size:"small",type:"number",variant:"outlined"}))}}),q&&(0,g.jsx)(x.Qr,{defaultValue:r.playerB.penaltyScore,name:A("playerB.penaltyScore"),control:n,render:function(e){var n=e.field;e.fieldState.error;return(0,g.jsx)(ae.Z,(0,a.Z)((0,a.Z)({disabled:D,inputProps:{className:"p-1 text-center text-xs"}},n),{},{className:"mx-1 w-10",size:"small",type:"number",variant:"filled",placeholder:u("kr.")}))}})]})]})}),(0,g.jsx)(se.ZP,{item:!0,className:"flex justify-start items-center",xs:5,children:(0,g.jsx)(x.Qr,{defaultValue:r.playerB.id,name:A("playerB.id"),control:n,render:function(e){var n=e.field,r=n.value,t=n.onChange;e.fieldState.error;return(0,g.jsx)("span",{className:"text-xs break-all",children:r?ee(r,null===d||void 0===d?void 0:d.docs):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(H,{onAdd:function(){C(!0)}}),(0,g.jsx)(F,{onClose:P,open:w,onPick:function(e){t(e.id),z(null===S||void 0===S?void 0:S.id,e.id)},disabledPlayers:i})]})})}})})]}),(0,g.jsx)(oe.Z,{})]})}var ce=f.memo(le),de=r(8163);function ue(e){var n=e.control,r=e.typeOfWin,t=e.promotion,s=e.index,a=e.phaseIndex,i=(e.playerCount,(0,h.$)().t),l=(0,x.Dq)({control:n,name:"phases.".concat(a,".groups.").concat(s,".players"),keyName:"formId"}),d=l.fields,u=(l.replace,l.update),p=(0,x.Dq)({control:n,name:"phases.".concat(a,".groups.").concat(s,".results"),keyName:"formId"}),j=p.fields,y=p.replace,Z=(0,f.useState)(null),N=(0,o.Z)(Z,2),b=N[0],k=N[1],w=(0,f.useCallback)((function(e){k(e),S(!0)}),[]),C=(0,f.useState)(!1),I=(0,o.Z)(C,2),A=I[0],S=I[1],B=(0,f.useCallback)((function(){k(null),S(!1)}),[]),z=(0,f.useMemo)((function(){return(0,m.compact)((0,m.map)(d,"id"))}),[d]),q=(0,x.qo)({control:n,name:"phases.".concat(a,".groups.").concat(s,".results")}),D=(0,f.useCallback)((function(e){u(b,{id:e.id,firstName:e.firstName,lastName:e.lastName}),B()}),[B,b,u]);return(0,de.Z)((function(){if((0,m.isEmpty)((0,m.filter)(d,(function(e){return!e.id})))){var e=(0,m.map)((0,m.combinations)(d,2),(function(e){var n=(0,o.Z)(e,2),r=n[0],t=n[1];return{playerA:{id:r.id||"",score:""},playerB:{id:t.id||"",score:""}}}));y(r===v.q.TwoMatch?(0,m.concat)(e,(0,m.map)(e,(function(e){var n=e.playerA;return{playerA:e.playerB,playerB:n}}))):e)}}),[d]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(F,{onClose:B,open:A,onPick:D,disabledPlayers:z}),(0,g.jsx)(te,{className:"my-2",players:d,onAddPlayer:w,promotion:t,results:q}),(0,g.jsxs)(c.Z,{children:[(0,m.isEmpty)(j)&&(0,g.jsx)(P.Z,{severity:"info",variant:"standard",children:i("Wprowad\u017a wszystkich graczy aby wygenerowa\u0107 terminarz")}),(0,m.map)(j,(function(e,r){return e.playerA.id&&e.playerB.id&&(0,g.jsx)(ce,{control:n,result:e,formName:"phases.".concat(a,".groups.").concat(s,".results.").concat(r)},e.formId)}))]})]})}var pe=f.memo(ue);function me(e){var n=e.schema,r=e.index,t=e.control,s=(0,f.useState)("0"),a=(0,o.Z)(s,2),i=a[0],c=a[1],d=(0,h.$)().t,u=n.phases[r];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(b.Z,{variant:"outlined",children:(0,m.map)(u.groups,(function(e,n){return(0,g.jsxs)(l.Z,{variant:i===String(n)?"contained":"outlined",size:"small",onClick:function(){return function(e){c(e)}(String(n))},children:[d("Grupa")," ",I.CR[n]]},n)}))}),(0,m.map)(u.groups,(function(e,n){return(0,g.jsx)(C,{value:i,index:String(n),children:(0,g.jsx)(pe,{playerCount:e.playerCount,control:t,typeOfWin:u.typeOfWin,promotion:e.promotion,index:n,phaseIndex:r})},n)}))]})}var fe=f.memo(me),xe=r(3433);function he(e){var n=e.schema,r=e.index,t=e.control,s=(0,x.Dq)({control:t,name:"phases.".concat(r,".results"),keyName:"formId"}),a=s.fields,o=s.append,i=(s.replace,n.phases[r]),l=(0,x.qo)({control:t,name:"phases.".concat(r,".results")}),c=(0,f.useCallback)((function(e){o(e)}),[o]),d=(0,f.useMemo)((function(){return(0,m.compact)([].concat((0,xe.Z)((0,m.flatMap)(l,"playerA.id")),(0,xe.Z)((0,m.flatMap)(l,"playerB.id"))))}),[l]);return console.log(a,"results---222"),(0,g.jsx)(g.Fragment,{children:(0,m.map)(a,(function(e,n){return(0,g.jsx)(ce,{formName:"phases.".concat(r,".results.").concat(n),disabledPlayers:d,typeOfWin:i.typeOfWin,control:t,result:e,onAdd:c},e.formId)}))})}var ve=f.memo(he);v.q.OneMatch;var je=function(){var e=(0,Z.UO)().id,n=(0,f.useState)("0"),r=(0,o.Z)(n,2),b=r[0],k=r[1],w=(0,p.C5)(e),I=w.data,P=w.isLoading,A=null===I||void 0===I?void 0:I.data(),S=(0,p.wp)(null===A||void 0===A?void 0:A.schemaId),B=S.data,z=S.isLoading,q=null===B||void 0===B?void 0:B.data(),D=(0,x.cI)(),Q=D.control,M=D.handleSubmit,W=D.reset;D.register,D.setValue,D.watch,(0,f.useEffect)((function(){null!==A&&void 0!==A&&A.phases?W(A):W((0,a.Z)((0,a.Z)({},A),{},{phases:[{groups:[{players:(0,m.map)((0,m.range)(0,3),(function(){return{id:"",firstName:"",lastName:""}})),results:[]}]},{results:[{playerA:{id:"",score:""},playerB:{id:"",score:""}}]}]}))}),[W,I]);var O=(0,h.$)().t,F=(0,f.useCallback)(function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n,"data");case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),V=(0,f.useCallback)((function(e){console.log(e)}),[]),E=(0,f.useCallback)((function(){M(F,V)()}),[M,F,V]);return(0,g.jsx)(N.g,{loading:P||z,children:(0,g.jsxs)(i.Z,{children:[(0,g.jsx)(u.Z,{value:b,onChange:function(e,n){k(n)},variant:"scrollable",children:(0,m.map)(null===q||void 0===q?void 0:q.phases,(function(e,n){return(0,g.jsx)(d.Z,{label:e.name,value:String(n)},n)}))}),q&&(0,m.map)(null===q||void 0===q?void 0:q.phases,(function(e,n){return(0,g.jsx)(C,{value:b,index:String(n),className:"p-3",children:e.isGroupStage===v.Y.Cup?(0,g.jsx)(ve,{schema:q,index:n,control:Q}):(0,g.jsx)(fe,{schema:q,index:n,control:Q})},n)})),(0,g.jsxs)(c.Z,{className:"px-6 pb-4",children:[(null===A||void 0===A?void 0:A.startDate)&&!(null!==A&&void 0!==A&&A.endDate)&&(0,g.jsx)(l.Z,{onClick:function(){},startIcon:(0,g.jsx)(y.Z,{}),color:"primary",children:O("Zako\u0144cz turniej")}),!(null!==A&&void 0!==A&&A.startDate)&&!(null!==A&&void 0!==A&&A.endDate)&&(0,g.jsx)(l.Z,{onClick:E,startIcon:(0,g.jsx)(j.Z,{}),color:"primary",children:O("Wystartuj turniej")})]})]})})}}}]);
//# sourceMappingURL=317.d225d76f.chunk.js.map