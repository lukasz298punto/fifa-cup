"use strict";(self.webpackChunkfifa_cup=self.webpackChunkfifa_cup||[]).push([[208],{3208:function(e,n,r){r.r(n),r.d(n,{default:function(){return Ne}});var a=r(4165),t=r(5861),s=r(1413),o=r(9439),l=r(6580),i=r(6650),c=r(1091),d=r(228),u=r(166),p=r(142),m=r(7708),x=r(763),f=(r(1361),r(2791)),h=r(1134),v=r(3168),j=r(6493),y=r(7723),Z=r(6595),g=r(9001),N=r(7689),b=r(6582),w=r(9276),C=r(8182),k=r(184);var P=function(e){var n=e.children,r=e.value,a=e.index,t=e.className;return(0,k.jsx)("div",{className:(0,C.Z)(r!==a&&"hidden"),children:(0,k.jsx)(w.Z,{className:t,children:n})})},S=r(4259),A=r(1508),B=r(501),D=r(3978),q=r(5419),M=r(2637),z=r(464),I=r(5629),E=r(6132),W=r(9562),F=r(4346),Q=r(8506);function O(e){var n=e.onClose,r=e.onPick,a=e.disabledPlayers,t=e.open,o=(0,m.qu)(),l=o.data,i=o.isLoading,c=(0,v.$)().t;return(0,k.jsx)(M.Z,{onClose:n,open:t,children:(0,k.jsxs)(Q.g,{loading:i,children:[(0,k.jsx)(z.Z,{children:c("Wybierz zawodnika")}),(0,k.jsx)(I.Z,{sx:{pt:0},children:(0,x.map)(null===l||void 0===l?void 0:l.docs,(function(e){var n=e.data();return(0,k.jsxs)(E.ZP,{disabled:(0,x.includes)(a,e.id),button:!0,onClick:function(){return r((0,s.Z)((0,s.Z)({},n),{},{id:e.id}))},children:[(0,k.jsx)(W.Z,{children:(0,k.jsx)(D.Z,{sx:{bgcolor:q.Z[100],color:q.Z[600]},children:(0,k.jsx)(B.Z,{})})}),(0,k.jsx)(F.Z,{primary:n.firstName+" "+n.lastName})]},e.id)}))})]})})}var V=f.memo(O),L=r(1487),$=r(6815),G=r(1680),U=r(9773),X=r(9827),H=r(807),R=r(5987),T=r(3811),Y=r(8439),_=["onAdd"];var J=function(e){var n=e.onAdd,r=(0,R.Z)(e,_);return(0,k.jsx)(T.Z,(0,s.Z)((0,s.Z)({className:"p-0",size:"small",color:"primary",onClick:n},r),{},{children:(0,k.jsx)(Y.Z,{})}))},K=r(4337),ee=r(7110),ne=r(2400),re=r(7539);function ae(e){var n=e.players,r=e.promotion,a=e.onAddPlayer,t=e.results,s=e.className,o=e.allActivePlayers,l=(0,v.$)().t,i=(0,f.useMemo)((function(){return(0,x.isEmpty)(t)?(0,x.map)(n,(function(e){return{id:e.id||"",formId:e.formId||"",pkt:0,m:0,w:0,r:0,p:0,brPlus:0,brMinus:0,brDiff:0}})):(0,ee.EC)((0,x.map)(n,"id"),t)}),[t,n]);return(0,k.jsx)(K.x,{className:s,children:(0,k.jsxs)(G.Z,{children:[(0,k.jsx)(X.Z,{children:(0,k.jsxs)(H.Z,{children:[(0,k.jsx)(re.p,{align:"left",children:l("Zawodnik")}),(0,k.jsx)(re.p,{width:50,className:"text-center",children:l("Pkt")}),(0,k.jsx)(re.p,{width:50,className:"text-center",children:l("M")}),(0,k.jsx)(re.p,{width:50,className:"text-center",children:l("W")}),(0,k.jsx)(re.p,{width:50,className:"text-center",children:l("R")}),(0,k.jsx)(re.p,{width:50,className:"text-center",children:l("P")}),(0,k.jsx)(re.p,{width:50,className:"text-center",children:l("Br+")}),(0,k.jsx)(re.p,{width:50,className:"text-center",children:l("Br-")}),(0,k.jsx)(re.p,{width:50,className:"text-center",children:l("+/-")})]})}),(0,k.jsx)(U.Z,{children:(0,x.map)(i,(function(e,n){var t=e.id,s=e.formId,l=e.pkt,i=e.m,c=e.w,d=e.r,u=e.p,p=e.brPlus,m=e.brMinus,x=e.brDiff;return(0,k.jsxs)(H.Z,{style:{backgroundColor:r>n?L.Z[100]:$.Z[100]},children:[(0,k.jsx)(re.p,{component:"th",scope:"row",children:t?(0,ne.MX)(t,o):(0,k.jsx)(J,{onAdd:function(){a(n)}})}),(0,k.jsx)(re.p,{component:"th",scope:"row",className:"text-center font-bold",children:l}),(0,k.jsx)(re.p,{component:"th",scope:"row",className:"text-center",children:i}),(0,k.jsx)(re.p,{component:"th",scope:"row",className:"text-center",children:c}),(0,k.jsx)(re.p,{component:"th",scope:"row",className:"text-center",children:d}),(0,k.jsx)(re.p,{component:"th",scope:"row",className:"text-center",children:u}),(0,k.jsx)(re.p,{component:"th",scope:"row",className:"text-center",children:p}),(0,k.jsx)(re.p,{component:"th",scope:"row",className:"text-center",children:m}),(0,k.jsx)(re.p,{component:"th",scope:"row",className:"text-center",children:x})]},s)}))})]})})}var te=f.memo(ae),se=r(5953),oe=r(9911),le=r(1872),ie=r(5088);function ce(e){var n=e.control,r=e.result,a=e.onAdd,t=e.typeOfWin,s=e.disabledPlayers,l=e.formName,i=(0,m.qu)(),c=i.data,u=(i.isLoading,(0,v.$)().t),p=(0,f.useState)(!1),j=(0,o.Z)(p,2),Z=j[0],g=j[1],N=(0,f.useState)(!1),b=(0,o.Z)(N,2),w=b[0],C=b[1],P=(0,m.DH)(),S=(0,f.useCallback)((function(){g(!1)}),[]),A=(0,f.useCallback)((function(){C(!1)}),[]),B=function(e){return"".concat(l,".").concat(e)},D=(0,h.qo)({control:n,name:B("playerA")}),q=(0,h.qo)({control:n,name:B("playerB")}),M=function(e,n){e&&n&&a&&(0,x.forEach)((0,x.range)(0,(0,ie.EQ)(t).with(y.q.TwoMatch,(function(){return 1})).otherwise((function(){return 0}))),(function(){a({playerA:{id:e,score:""},playerB:{id:n,score:""}})}))},z=a&&(null===D||void 0===D?void 0:D.score)&&(null===q||void 0===q?void 0:q.score)&&(null===D||void 0===D?void 0:D.score)===(null===q||void 0===q?void 0:q.score),I=!(null!==D&&void 0!==D&&D.id)||!(null!==q&&void 0!==q&&q.id);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(se.ZP,{container:!0,className:"py-1 items-center",wrap:"nowrap",children:[(0,k.jsxs)(se.ZP,{item:!0,xs:5,className:"flex justify-end items-center",children:[(0,k.jsx)(h.Qr,{defaultValue:r.playerA.id,name:B("playerA.id"),control:n,render:function(e){var n=e.field,r=n.value,a=n.onChange;e.fieldState.error;return(0,k.jsx)("span",{className:"text-xs break-all",children:!r&&P?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(J,{onAdd:function(){g(!0)}}),(0,k.jsx)(V,{onClose:S,open:Z,onPick:function(e){a(e.id),M(e.id,null===q||void 0===q?void 0:q.id)},disabledPlayers:s})]}):(0,ne.MX)(r,null===c||void 0===c?void 0:c.docs)})}}),z&&(0,k.jsx)(h.Qr,{defaultValue:r.playerB.penaltyScore,name:B("playerA.penaltyScore"),control:n,render:function(e){var n=e.field,r=n.onChange,a=n.value;e.fieldState.error;return P?(0,k.jsx)(oe.Z,{disabled:I,inputProps:{className:"p-1 text-center text-xs"},value:a,onChange:function(e){r((0,ne.Pw)(e.target.value))},className:"mx-1 w-10",size:"small",type:"number",variant:"filled",placeholder:u("kr.")}):(0,k.jsx)("span",{className:"text-xs ml-1 mb-[7px] -mr-[3px]",children:a})}})]}),(0,k.jsx)(se.ZP,{item:!0,children:(0,k.jsxs)(d.Z,{className:"flex flex-nowrap",children:[(0,k.jsx)(h.Qr,{defaultValue:r.playerA.score,name:B("playerA.score"),control:n,render:function(e){var n=e.field,r=n.onChange,a=n.value;e.fieldState.error;return P?(0,k.jsx)(oe.Z,{disabled:I,inputProps:{className:"p-1 text-center"},value:a,onChange:function(e){r((0,ne.Pw)(e.target.value))},className:"mx-1 w-10",size:"small",type:"number",variant:"outlined"}):(0,k.jsx)("span",{className:"mx-1 font-bold",children:a})}}),":",(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(h.Qr,{defaultValue:r.playerB.score,name:B("playerB.score"),control:n,render:function(e){var n=e.field,r=n.onChange,a=n.value;e.fieldState.error;return P?(0,k.jsx)(oe.Z,{disabled:I,inputProps:{className:"p-1 text-center"},value:a,onChange:function(e){r((0,ne.Pw)(e.target.value))},className:"mx-1 w-10",size:"small",type:"number",variant:"outlined"}):(0,k.jsx)("span",{className:"mx-1 font-bold",children:a})}})})]})}),(0,k.jsxs)(se.ZP,{item:!0,className:"flex justify-start items-center",xs:5,children:[z&&(0,k.jsx)(h.Qr,{defaultValue:r.playerB.penaltyScore,name:B("playerB.penaltyScore"),control:n,render:function(e){var n=e.field,r=n.onChange,a=n.value;e.fieldState.error;return P?(0,k.jsx)(oe.Z,{disabled:I,inputProps:{className:"p-1 text-center text-xs"},value:a,onChange:function(e){r((0,ne.Pw)(e.target.value))},className:"mx-1 w-10",size:"small",type:"number",variant:"filled",placeholder:u("kr.")}):(0,k.jsx)("span",{className:"text-xs mr-1 mb-[7px] -ml-[3px]",children:a})}}),(0,k.jsx)(h.Qr,{defaultValue:r.playerB.id,name:B("playerB.id"),control:n,render:function(e){var n=e.field,r=n.value,a=n.onChange;e.fieldState.error;return(0,k.jsx)("span",{className:"text-xs break-all",children:!r&&P?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(J,{onAdd:function(){C(!0)}}),(0,k.jsx)(V,{onClose:A,open:w,onPick:function(e){a(e.id),M(null===D||void 0===D?void 0:D.id,e.id)},disabledPlayers:s})]}):(0,ne.MX)(r,null===c||void 0===c?void 0:c.docs)})}})]})]}),(0,k.jsx)(le.Z,{})]})}var de=f.memo(ce),ue=r(8163);function pe(e){var n=e.control,r=e.typeOfWin,a=e.promotion,t=e.index,s=e.phaseIndex,i=(e.playerCount,(0,v.$)().t),c=(0,m.qu)(),u=c.data,p=c.isLoading,j=(0,h.Dq)({control:n,name:"phases.".concat(s,".groups.").concat(t,".players"),keyName:"formId"}),Z=j.fields,g=(j.replace,j.update),N=(0,h.Dq)({control:n,name:"phases.".concat(s,".groups.").concat(t,".results"),keyName:"formId"}),b=N.fields,w=N.replace,C=(0,f.useState)(null),P=(0,o.Z)(C,2),S=P[0],B=P[1],D=(0,f.useCallback)((function(e){B(e),I(!0)}),[]),q=(0,f.useState)(!1),M=(0,o.Z)(q,2),z=M[0],I=M[1],E=(0,f.useCallback)((function(){B(null),I(!1)}),[]),W=(0,f.useMemo)((function(){return(0,x.compact)((0,x.map)(Z,"id"))}),[Z]),F=(0,h.qo)({control:n,name:"phases.".concat(s,".groups.").concat(t,".results")}),Q=(0,f.useCallback)((function(e){g(S,{id:e.id,firstName:e.firstName,lastName:e.lastName}),E()}),[E,S,g]);return(0,ue.Z)((function(){if((0,x.isEmpty)((0,x.filter)(Z,(function(e){return!e.id})))&&(0,x.isEmpty)(b)){var e=(0,x.shuffle)((0,x.map)((0,x.combinations)(Z,2),(function(e){var n=(0,o.Z)(e,2),r=n[0],a=n[1];return{playerA:{id:r.id||"",score:""},playerB:{id:a.id||"",score:""}}})));w(r===y.q.TwoMatch?(0,x.concat)(e,(0,x.map)(e,(function(e){var n=e.playerA;return{playerA:e.playerB,playerB:n}}))):e)}}),[Z]),p?(0,k.jsx)(l.Z,{size:24,className:"mt-2"}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(V,{onClose:E,open:z,onPick:Q,disabledPlayers:W}),(0,k.jsx)(te,{allActivePlayers:null===u||void 0===u?void 0:u.docs,className:"my-2",players:Z,onAddPlayer:D,promotion:a,results:F}),(0,k.jsxs)(d.Z,{children:[(0,x.isEmpty)(b)&&(0,k.jsx)(A.Z,{severity:"info",variant:"standard",children:i("Wprowad\u017a wszystkich graczy aby wygenerowa\u0107 terminarz")}),(0,x.map)(b,(function(e,r){return e.playerA.id&&e.playerB.id&&(0,k.jsx)(de,{control:n,result:e,formName:"phases.".concat(s,".groups.").concat(t,".results.").concat(r)},e.formId)}))]})]})}var me=f.memo(pe);function xe(e){var n=e.schema,r=e.index,a=e.control,t=(0,f.useState)("0"),s=(0,o.Z)(t,2),l=s[0],i=s[1],d=(0,v.$)().t,u=n.phases[r];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(b.Z,{variant:"outlined",children:(0,x.map)(u.groups,(function(e,n){return(0,k.jsxs)(c.Z,{variant:l===String(n)?"contained":"outlined",size:"small",onClick:function(){return function(e){i(e)}(String(n))},children:[d("Grupa")," ",S.CR[n]]},n)}))}),(0,x.map)(u.groups,(function(e,n){return(0,k.jsx)(P,{value:l,index:String(n),children:(0,k.jsx)(me,{playerCount:e.playerCount,control:a,typeOfWin:u.typeOfWin,promotion:e.promotion,index:n,phaseIndex:r})},n)}))]})}var fe=f.memo(xe),he=r(3433);function ve(e){var n=e.schema,r=e.index,a=e.control,t=(0,h.Dq)({control:a,name:"phases.".concat(r,".results"),keyName:"formId"}),s=t.fields,o=t.append,l=(t.replace,n.phases[r]),i=(0,h.qo)({control:a,name:"phases.".concat(r,".results")}),c=(0,f.useCallback)((function(e){o(e)}),[o]),d=(0,f.useMemo)((function(){return(0,x.compact)([].concat((0,he.Z)((0,x.flatMap)(i,"playerA.id")),(0,he.Z)((0,x.flatMap)(i,"playerB.id"))))}),[i]);return(0,k.jsx)(k.Fragment,{children:(0,x.map)(s,(function(e,n){return(0,k.jsx)(de,{formName:"phases.".concat(r,".results.").concat(n),disabledPlayers:d,typeOfWin:l.typeOfWin,control:a,result:e,onAdd:c},e.formId)}))})}var je,ye=f.memo(ve),Ze=r(6386),ge=r(6843);!function(e){e[e.End=0]="End",e[e.Update=1]="Update",e[e.Start=2]="Start"}(je||(je={}));var Ne=function(){var e=(0,N.UO)().id,n=(0,f.useState)("0"),r=(0,o.Z)(n,2),b=r[0],w=r[1],C=(0,m.oQ)(e),A=C.mutate,B=(C.isLoading,(0,v.$)().t);console.log(e,"id");var D=(0,m.DH)(),q=(0,m.C5)(e),M=q.data,z=q.isLoading,I=(0,f.useMemo)((function(){return null===M||void 0===M?void 0:M.data()}),[M]),E=(0,m.wp)(null===I||void 0===I?void 0:I.schemaId),W=E.data,F=E.isLoading,Q=(0,f.useMemo)((function(){return null===W||void 0===W?void 0:W.data()}),[W]),O=(0,h.cI)(),V=O.control,L=O.handleSubmit,$=O.reset,G=(O.register,O.setValue,O.watch,(0,h.qo)({control:V,name:"phases"}));(0,f.useEffect)((function(){I&&Q&&(null!==I&&void 0!==I&&I.phases?$(I):$((0,s.Z)((0,s.Z)({},I),{},{phases:(0,x.map)(null===Q||void 0===Q?void 0:Q.phases,(function(e){return e.isGroupStage===y.Y.GroupStage?{groups:(0,x.map)(null===e||void 0===e?void 0:e.groups,(function(e){return{players:(0,x.map)((0,x.range)(0,e.playerCount),(function(){return{id:"",firstName:"",lastName:""}})),results:[]}}))}:{results:(0,x.map)((0,x.range)(0,Number(e.pairCount)||0),(function(){return{playerA:{id:"",score:""},playerB:{id:"",score:""}}}))}}))})))}),[$,I,Q]);var U=(0,f.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je.Update;return function(){L(function(){var n=(0,t.Z)((0,a.Z)().mark((function n(r){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:A((0,s.Z)((0,s.Z)({},r),{},{startDate:e===je.Start?(0,Ze.Z)(new Date,S.dq):r.startDate,endDate:e===je.End?(0,Ze.Z)(new Date,S.dq):r.endDate})),console.log(r,"data");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(e){console.log(e)}))()}}),[L,A]);return(0,j.Z)((function(){I&&Q&&D&&(console.log("odpalamy"),U()())}),4e3,[G]),z||F?(0,k.jsx)(l.Z,{size:24}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(d.Z,{children:[(0,k.jsx)(ge.Z,{className:"text-xs mr-1"}),(0,k.jsx)("span",{className:"text-xs",children:null===I||void 0===I?void 0:I.name})]}),(0,k.jsxs)(i.Z,{children:[(0,k.jsx)(p.Z,{value:b,onChange:function(e,n){w(n)},variant:"scrollable",children:(0,x.map)(null===Q||void 0===Q?void 0:Q.phases,(function(e,n){return(0,k.jsx)(u.Z,{label:e.name,value:String(n)},n)}))}),Q&&(0,x.map)(null===Q||void 0===Q?void 0:Q.phases,(function(e,n){return(0,k.jsx)(P,{value:b,index:String(n),className:"p-3",children:e.isGroupStage===y.Y.Cup?(0,k.jsx)(ye,{schema:Q,index:n,control:V}):(0,k.jsx)(fe,{schema:Q,index:n,control:V})},n)})),(0,k.jsxs)(d.Z,{className:"px-6 pb-4",children:[D&&(null===I||void 0===I?void 0:I.startDate)&&!(null!==I&&void 0!==I&&I.endDate)&&(0,k.jsx)(c.Z,{onClick:U(je.End),startIcon:(0,k.jsx)(g.Z,{}),color:"primary",children:B("Zako\u0144cz turniej")}),D&&!(null!==I&&void 0!==I&&I.startDate)&&!(null!==I&&void 0!==I&&I.endDate)&&(0,k.jsx)(c.Z,{onClick:U(je.Start),startIcon:(0,k.jsx)(Z.Z,{}),color:"primary",children:B("Wystartuj turniej")})]})]})]})}}}]);
//# sourceMappingURL=208.9be33b78.chunk.js.map