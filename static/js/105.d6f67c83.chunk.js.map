{"version":3,"file":"static/js/105.d6f67c83.chunk.js","mappings":"mUA6HA,UAvGA,WACI,OAAkCA,EAAAA,EAAAA,MAA1BC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,aACXC,GAAWC,EAAAA,EAAAA,MACjB,GAA4BC,EAAAA,EAAAA,MAApBC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,UACNC,GAAMC,EAAAA,EAAAA,KAAND,EACR,GAA2DE,EAAAA,EAAAA,MAA3CC,EAAhB,EAAQC,OAAgCC,EAAxC,EAA6BN,UACvBO,GAAWC,EAAAA,EAAAA,MA0BjB,OANAC,EAAAA,EAAAA,YAAU,WACDF,GACDX,GAASc,EAAAA,EAAAA,IAAaC,EAAAA,EAAAA,KAAAA,MAE7B,GAAE,CAACJ,EAAUX,KAGV,SAAC,IAAD,CAAOgB,UAAU,MAAjB,UACI,kBAAMC,SAAUlB,GA1BoB,SAAC,GAAwB,IAAtBmB,EAAqB,EAArBA,SAAUC,EAAW,EAAXA,KACrDX,EACI,CACIW,KAAAA,EACAC,QAAS,KACTC,UAAW,KACXH,SAAAA,GAEJ,CACII,UAAW,SAACC,GACRvB,GAASc,EAAAA,EAAAA,IAAaC,EAAAA,EAAAA,kBAAAA,KAA+B,CAAES,GAAID,EAAIC,KAClE,GAGZ,IAE+C,SAACrB,GAAD,OAAUsB,QAAQC,IAAIvB,EAAtB,IAUxC,WACI,UAAC,KAAD,CAAMwB,WAAS,EAACC,QAAS,EAAzB,WACI,SAAC,KAAD,CAAMC,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAvB,UACI,SAAC,IAAD,CAASC,QAAS5B,EAAlB,UACI,SAAC,KAAD,CACI6B,kBAAcC,EACdf,KAAK,WACLrB,QAASA,EACTqC,MAAO,CAAEC,SAAU/B,EAAE,0BACrBgC,OAAQ,gBAAGC,EAAH,EAAGA,MAAqBC,EAAxB,EAAUC,WAAcD,MAAxB,OACJ,UAAC,IAAD,CAAavB,UAAU,SAASuB,QAASA,EAAzC,WACI,SAAC,IAAD,UAAYlC,EAAE,qBACd,SAAC,KAAD,kBACQiC,GADR,IAEIG,KAAK,QACLzB,UAAU,SACVuB,QAASA,EAJb,UAMKG,EAAAA,EAAAA,KAAG,OAACvC,QAAD,IAACA,OAAD,EAACA,EAAMwC,MAAM,SAACC,GACd,IAAQzB,EAASyB,EAAYzC,OAArBgB,KAER,OACI,SAAC,IAAD,CACI0B,MAAOD,EAAYpB,GADvB,SAIKL,GAFIyB,EAAYpB,GAK5B,OAEJe,IAAS,SAAC,IAAD,iBAAiBA,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAOO,YAtBlC,SA4BpB,SAAC,KAAD,CAAMjB,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAvB,UACI,SAAC,KAAD,CACIZ,KAAK,OACLrB,QAASA,EACTqC,MAAO,CAAEC,SAAU/B,EAAE,0BACrBgC,OAAQ,gBAAGC,EAAH,EAAGA,MAAqBC,EAAxB,EAAUC,WAAcD,MAAxB,OACJ,UAAC,IAAD,CAAavB,UAAU,SAASuB,QAASA,EAAzC,WACI,SAAC,IAAD,UAAYlC,EAAE,qBACd,SAAC,KAAD,kBACQiC,GADR,IAEIG,KAAK,QACLF,QAASA,EACTQ,YAAiB,OAALR,QAAK,IAALA,OAAA,EAAAA,EAAOO,UAAW,QAPlC,UAcpB,SAAC,IAAD,CAASd,QAAStB,EAAlB,UACI,SAAC,IAAD,CACIM,UAAU,OACVgC,KAAK,SACLC,WAAW,SAAC,IAAD,IACXC,MAAM,UACNC,SAAU9C,EAAE,qBAMnC,C","sources":["pages/TournamentNew.tsx"],"sourcesContent":["import SaveIcon from '@mui/icons-material/Save';\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    FormHelperText,\r\n    FormLabel,\r\n    Grid,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    TextField,\r\n} from '@mui/material';\r\nimport { Loading } from 'components/Loading';\r\nimport { useIsLogged, useSchemaListQuery, useStoreTournamentMutation } from 'hooks';\r\nimport { map } from 'lodash';\r\nimport { useEffect } from 'react';\r\nimport { Controller, SubmitErrorHandler, SubmitHandler, useForm } from 'react-hook-form';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { generatePath, useNavigate } from 'react-router-dom';\r\nimport { routes } from 'routing/routes';\r\nimport { Tournament } from 'types/global';\r\n\r\nfunction TournamentNew() {\r\n    const { control, handleSubmit } = useForm<Tournament>();\r\n    const navigate = useNavigate();\r\n    const { data, isLoading } = useSchemaListQuery();\r\n    const { t } = useTranslation();\r\n    const { mutate: storeMutate, isLoading: storeIsLoading } = useStoreTournamentMutation();\r\n    const isLogged = useIsLogged();\r\n\r\n    const onSubmit: SubmitHandler<Tournament> = ({ schemaId, name }) => {\r\n        storeMutate(\r\n            {\r\n                name,\r\n                endDate: null,\r\n                startDate: null,\r\n                schemaId,\r\n            },\r\n            {\r\n                onSuccess: (res) => {\r\n                    navigate(generatePath(routes.TOURNAMENT_DETAIL.path, { id: res.id }));\r\n                },\r\n            }\r\n        );\r\n    };\r\n\r\n    const onError: SubmitErrorHandler<Tournament> = (data) => console.log(data);\r\n\r\n    useEffect(() => {\r\n        if (!isLogged) {\r\n            navigate(generatePath(routes.HOME.path));\r\n        }\r\n    }, [isLogged, navigate]);\r\n\r\n    return (\r\n        <Paper className=\"p-4\">\r\n            <form onSubmit={handleSubmit(onSubmit, onError)}>\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12} md={6}>\r\n                        <Loading loading={isLoading}>\r\n                            <Controller\r\n                                defaultValue={undefined}\r\n                                name=\"schemaId\"\r\n                                control={control}\r\n                                rules={{ required: t('To pole jest wymagane') }}\r\n                                render={({ field, fieldState: { error } }) => (\r\n                                    <FormControl className=\"w-full\" error={!!error}>\r\n                                        <FormLabel>{t('Nazwa schematu')}</FormLabel>\r\n                                        <Select\r\n                                            {...field}\r\n                                            size=\"small\"\r\n                                            className=\"w-full\"\r\n                                            error={!!error}\r\n                                        >\r\n                                            {map(data?.docs, (docSnapshot) => {\r\n                                                const { name } = docSnapshot.data();\r\n\r\n                                                return (\r\n                                                    <MenuItem\r\n                                                        value={docSnapshot.id}\r\n                                                        key={docSnapshot.id}\r\n                                                    >\r\n                                                        {name}\r\n                                                    </MenuItem>\r\n                                                );\r\n                                            })}\r\n                                        </Select>\r\n                                        {error && <FormHelperText>{error?.message}</FormHelperText>}\r\n                                    </FormControl>\r\n                                )}\r\n                            />\r\n                        </Loading>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={6}>\r\n                        <Controller\r\n                            name=\"name\"\r\n                            control={control}\r\n                            rules={{ required: t('To pole jest wymagane') }}\r\n                            render={({ field, fieldState: { error } }) => (\r\n                                <FormControl className=\"w-full\" error={!!error}>\r\n                                    <FormLabel>{t('Nazwa turnieju')}</FormLabel>\r\n                                    <TextField\r\n                                        {...field}\r\n                                        size=\"small\"\r\n                                        error={!!error}\r\n                                        helperText={error?.message || ''}\r\n                                    />\r\n                                </FormControl>\r\n                            )}\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n                <Loading loading={storeIsLoading}>\r\n                    <Button\r\n                        className=\"mt-1\"\r\n                        type=\"submit\"\r\n                        startIcon={<SaveIcon />}\r\n                        color=\"primary\"\r\n                        children={t('UtwÃ³rz')}\r\n                    />\r\n                </Loading>\r\n            </form>\r\n        </Paper>\r\n    );\r\n}\r\nexport default TournamentNew;\r\n"],"names":["useForm","control","handleSubmit","navigate","useNavigate","useSchemaListQuery","data","isLoading","t","useTranslation","useStoreTournamentMutation","storeMutate","mutate","storeIsLoading","isLogged","useIsLogged","useEffect","generatePath","routes","className","onSubmit","schemaId","name","endDate","startDate","onSuccess","res","id","console","log","container","spacing","item","xs","md","loading","defaultValue","undefined","rules","required","render","field","error","fieldState","size","map","docs","docSnapshot","value","message","helperText","type","startIcon","color","children"],"sourceRoot":""}