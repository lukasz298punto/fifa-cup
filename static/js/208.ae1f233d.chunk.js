"use strict";(self.webpackChunkfifa_cup=self.webpackChunkfifa_cup||[]).push([[208],{3208:function(e,n,a){a.r(n),a.d(n,{default:function(){return Ce}});var r=a(4165),s=a(5861),t=a(1413),o=a(9439),l=a(9886),i=a(6843),c=a(6595),d=a(3329),u=a(9001),m=a(2797),p=a(6580),x=a(6650),f=a(1091),h=a(228),j=a(166),v=a(142),Z=a(8182),y=a(9276),N=a(184);var g=function(e){var n=e.children,a=e.value,r=e.index,s=e.className;return(0,N.jsx)("div",{className:(0,Z.Z)(a!==r&&"hidden"),children:(0,N.jsx)(y.Z,{className:s,children:n})})},w=a(4259),b=a(6386),C=a(7708),k=a(763),P=(a(1361),a(6582)),S=a(2791),A=a(3168),z=a(1508),D=a(501),B=a(3978),I=a(5419),M=a(2637),q=a(464),E=a(5629),F=a(6132),W=a(9562),Q=a(4346),O=a(8506);function G(e){var n=e.onClose,a=e.onPick,r=e.disabledPlayers,s=e.open,o=(0,C.qu)(),l=o.data,i=o.isLoading,c=(0,A.$)().t;return(0,N.jsx)(M.Z,{onClose:n,open:s,children:(0,N.jsxs)(O.g,{loading:i,children:[(0,N.jsx)(q.Z,{children:c("Wybierz zawodnika")}),(0,N.jsx)(E.Z,{sx:{pt:0},children:(0,k.map)(null===l||void 0===l?void 0:l.docs,(function(e){var n=e.data();return(0,N.jsxs)(F.ZP,{disabled:(0,k.includes)(r,e.id),button:!0,onClick:function(){return a((0,t.Z)((0,t.Z)({},n),{},{id:e.id}))},children:[(0,N.jsx)(W.Z,{children:(0,N.jsx)(B.Z,{sx:{bgcolor:I.Z[100],color:I.Z[600]},children:(0,N.jsx)(D.Z,{})})}),(0,N.jsx)(Q.Z,{primary:n.firstName+" "+n.lastName})]},e.id)}))})]})})}var V=S.memo(G),$=a(1487),L=a(6815),U=a(1680),X=a(9773),H=a(9827),R=a(807),T=a(5987),Y=a(3811),_=a(8439),J=["onAdd"];var K=function(e){var n=e.onAdd,a=(0,T.Z)(e,J);return(0,N.jsx)(Y.Z,(0,t.Z)((0,t.Z)({className:"p-0",size:"small",color:"primary",onClick:n},a),{},{children:(0,N.jsx)(_.Z,{})}))},ee=a(4337),ne=a(7110),ae=a(2400),re=a(7539);function se(e){var n=e.players,a=e.promotion,r=e.onAddPlayer,s=e.results,t=e.className,o=e.allActivePlayers,l=(0,A.$)().t,i=(0,S.useMemo)((function(){return(0,k.isEmpty)(s)?(0,k.map)(n,(function(e){return{id:e.id||"",formId:e.formId,pkt:0,m:0,w:0,r:0,p:0,brPlus:0,brMinus:0,brDiff:0}})):(0,ne.EC)((0,k.map)(n,"id"),s)}),[s,n]);return(0,N.jsx)(ee.x,{className:t,children:(0,N.jsxs)(U.Z,{children:[(0,N.jsx)(H.Z,{children:(0,N.jsxs)(R.Z,{children:[(0,N.jsx)(re.i,{align:"left",children:l("Zawodnik")}),(0,N.jsx)(re.i,{width:50,className:"text-center",children:l("Pkt")}),(0,N.jsx)(re.i,{width:50,className:"text-center",children:l("M")}),(0,N.jsx)(re.i,{width:50,className:"text-center",children:l("W")}),(0,N.jsx)(re.i,{width:50,className:"text-center",children:l("R")}),(0,N.jsx)(re.i,{width:50,className:"text-center",children:l("P")}),(0,N.jsx)(re.i,{width:50,className:"text-center",children:l("Br+")}),(0,N.jsx)(re.i,{width:50,className:"text-center",children:l("Br-")}),(0,N.jsx)(re.i,{width:50,className:"text-center",children:l("+/-")})]})}),(0,N.jsx)(X.Z,{children:(0,k.map)(i,(function(e,n){var s=e.formId,t=e.id,l=e.pkt,i=e.m,c=e.w,d=e.r,u=e.p,m=e.brPlus,p=e.brMinus,x=e.brDiff;return(0,N.jsxs)(R.Z,{style:{backgroundColor:a>n?$.Z[100]:L.Z[100]},children:[(0,N.jsx)(re.i,{component:"th",scope:"row",children:t?(0,ae.MX)(t,o):(0,N.jsx)(K,{onAdd:function(){r(n)}})}),(0,N.jsx)(re.i,{component:"th",scope:"row",className:"text-center font-bold",children:l}),(0,N.jsx)(re.i,{component:"th",scope:"row",className:"text-center",children:i}),(0,N.jsx)(re.i,{component:"th",scope:"row",className:"text-center",children:c}),(0,N.jsx)(re.i,{component:"th",scope:"row",className:"text-center",children:d}),(0,N.jsx)(re.i,{component:"th",scope:"row",className:"text-center",children:u}),(0,N.jsx)(re.i,{component:"th",scope:"row",className:"text-center",children:m}),(0,N.jsx)(re.i,{component:"th",scope:"row",className:"text-center",children:p}),(0,N.jsx)(re.i,{component:"th",scope:"row",className:"text-center",children:x})]},s)}))})]})})}var te=S.memo(se),oe=a(3950),le=a(5953),ie=a(9911),ce=a(1872),de=a(1134),ue=a(5088),me=a(7723);function pe(e){var n=e.control,a=e.result,r=e.onAdd,s=e.typeOfWin,t=e.disabledPlayers,i=e.formName,c=e.isGroup,d=void 0!==c&&c,u=(0,C.qu)().data,p=(0,A.$)().t,x=(0,S.useState)(!1),f=(0,o.Z)(x,2),j=f[0],v=f[1],y=(0,S.useState)(!1),g=(0,o.Z)(y,2),w=g[0],b=g[1],P=(0,S.useState)(!1),z=(0,o.Z)(P,2),D=z[0],B=z[1],I=(0,S.useState)(!1),M=(0,o.Z)(I,2),q=M[0],E=M[1],F=(0,C.DH)(),W=(0,l.u)(),Q=(0,m.Z)((0,k.get)(W,"breakpoints").down("sm")),O=(0,S.useCallback)((function(){v(!1)}),[]),G=(0,S.useCallback)((function(){b(!1)}),[]),$=(0,S.useCallback)((function(){B(!1)}),[]),L=(0,S.useCallback)((function(){E(!1)}),[]),U=function(e){return"".concat(i,".").concat(e)},X=(0,de.qo)({control:n,name:U("playerA")}),H=(0,de.qo)({control:n,name:U("playerB")}),R=function(e,n){e&&n&&r&&(0,k.forEach)((0,k.range)(0,(0,ue.EQ)(s).with(me.q.TwoMatch,(function(){return 1})).otherwise((function(){return 0}))),(function(){r({playerA:{id:e,score:""},playerB:{id:n,score:""}})}))},T=!(null!==X&&void 0!==X&&X.id)||!(null!==H&&void 0!==H&&H.id);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(le.ZP,{container:!0,className:"py-1 items-center",wrap:"nowrap",children:[(0,N.jsxs)(le.ZP,{item:!0,xs:5,className:"flex justify-end items-center",children:[(0,N.jsx)(de.Qr,{defaultValue:a.playerA.id,name:U("playerA.id"),control:n,render:function(e){var n=e.field,a=n.value,r=n.onChange;return(0,N.jsx)("span",{className:"text-xs break-words text-right",children:!a&&F?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(K,{onAdd:function(){v(!0)}}),(0,N.jsx)(V,{onClose:O,open:j,onPick:function(e){r(e.id),R(e.id,null===H||void 0===H?void 0:H.id)},disabledPlayers:t})]}):(0,N.jsxs)("span",{className:(0,Z.Z)(Q?"flex-col items-end":"flex  items-center","flex"),children:[!d&&F&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(V,{onClose:$,open:D,onPick:function(e){r(e.id),$()}}),(0,N.jsx)(Y.Z,{className:"p-0",size:"small",color:"primary",onClick:function(){B(!0)},children:(0,N.jsx)(oe.Z,{})})]}),(0,N.jsx)("span",{className:(0,Z.Z)(Q&&!d&&F&&"max-w-[50px]"),children:(0,ae.MX)(a,null===u||void 0===u?void 0:u.docs)})]})})}}),!d&&(0,N.jsx)(de.Qr,{defaultValue:a.playerB.penaltyScore||"",name:U("playerA.penaltyScore"),control:n,render:function(e){var n=e.field,a=n.onChange,r=n.value;return F?(0,N.jsx)(ie.Z,{disabled:T,inputProps:{className:"p-1 text-center text-xs"},value:r,onChange:function(e){a((0,ae.Pw)(e.target.value))},className:"mx-1 w-8",size:"small",type:"number",variant:"filled",placeholder:p("kr.")}):(0,N.jsx)("span",{className:"text-xs ml-1 mb-[7px] -mr-[3px] opacity-15",children:r})}})]}),(0,N.jsx)(le.ZP,{item:!0,children:(0,N.jsxs)(h.Z,{className:"flex flex-nowrap",children:[(0,N.jsx)(de.Qr,{defaultValue:a.playerA.score,name:U("playerA.score"),control:n,render:function(e){var n=e.field,a=n.onChange,r=n.value;return F?(0,N.jsx)(ie.Z,{autoComplete:"off",disabled:T,inputProps:{className:"p-1 text-center"},value:r,onChange:function(e){a((0,ae.Pw)(e.target.value))},className:"mx-1 w-8",size:"small",type:"number",variant:"outlined"}):(0,N.jsx)("span",{className:"mx-1 font-bold",children:r})}}),":",(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(de.Qr,{defaultValue:a.playerB.score,name:U("playerB.score"),control:n,render:function(e){var n=e.field,a=n.onChange,r=n.value;return F?(0,N.jsx)(ie.Z,{autoComplete:"off",disabled:T,inputProps:{className:"p-1 text-center"},value:r,onChange:function(e){a((0,ae.Pw)(e.target.value))},className:"mx-1 w-8",size:"small",type:"number",variant:"outlined"}):(0,N.jsx)("span",{className:"mx-1 font-bold",children:r})}})})]})}),(0,N.jsxs)(le.ZP,{item:!0,className:"flex justify-start items-center",xs:5,children:[!d&&(0,N.jsx)(de.Qr,{defaultValue:a.playerB.penaltyScore||"",name:U("playerB.penaltyScore"),control:n,render:function(e){var n=e.field,a=n.onChange,r=n.value;return F?(0,N.jsx)(ie.Z,{autoComplete:"off",disabled:T,inputProps:{className:"p-1 text-center text-xs"},value:r,onChange:function(e){a((0,ae.Pw)(e.target.value))},className:"mx-1 w-8",size:"small",type:"number",variant:"filled",placeholder:p("kr.")}):(0,N.jsx)("span",{className:"text-xs mr-1 mb-[7px] -ml-[3px] opacity-15",children:r})}}),(0,N.jsx)(de.Qr,{defaultValue:a.playerB.id,name:U("playerB.id"),control:n,render:function(e){var n=e.field,a=n.value,r=n.onChange;return(0,N.jsx)("span",{className:"text-xs break-words",children:!a&&F?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(K,{onAdd:function(){b(!0)}}),(0,N.jsx)(V,{onClose:G,open:w,onPick:function(e){r(e.id),R(null===X||void 0===X?void 0:X.id,e.id)},disabledPlayers:t})]}):(0,N.jsxs)("span",{className:(0,Z.Z)(Q?"flex-col items-start":"flex  items-center","flex"),children:[(0,N.jsx)("span",{className:(0,Z.Z)(Q&&!d&&F&&"order-1 max-w-[50px]"),children:(0,ae.MX)(a,null===u||void 0===u?void 0:u.docs)}),!d&&F&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(V,{onClose:L,open:q,onPick:function(e){r(e.id),L()}}),(0,N.jsx)(Y.Z,{className:"p-0",size:"small",color:"primary",onClick:function(){E(!0)},children:(0,N.jsx)(oe.Z,{})})]})]})})}})]})]}),(0,N.jsx)(ce.Z,{})]})}var xe=S.memo(pe),fe=a(8163);function he(e){var n=e.control,a=e.typeOfWin,r=e.promotion,s=e.index,t=e.phaseIndex,l=(0,A.$)().t,i=(0,C.qu)(),c=i.data,d=i.isLoading,u=(0,de.Dq)({control:n,name:"phases.".concat(t,".groups.").concat(s,".players"),keyName:"formId"}),m=u.fields,x=u.update,f=(0,de.Dq)({control:n,name:"phases.".concat(t,".groups.").concat(s,".results"),keyName:"formId"}),j=f.fields,v=f.replace,Z=(0,S.useState)(null),y=(0,o.Z)(Z,2),g=y[0],w=y[1],b=(0,S.useCallback)((function(e){w(e),I(!0)}),[]),P=(0,S.useState)(!1),D=(0,o.Z)(P,2),B=D[0],I=D[1],M=(0,S.useCallback)((function(){w(null),I(!1)}),[]),q=(0,S.useMemo)((function(){return(0,k.compact)((0,k.map)(m,"id"))}),[m]),E=(0,de.qo)({control:n,name:"phases.".concat(t,".groups.").concat(s,".results")}),F=(0,S.useCallback)((function(e){x(g,{id:e.id,firstName:e.firstName,lastName:e.lastName}),M()}),[M,g,x]);return(0,fe.Z)((function(){if((0,k.isEmpty)((0,k.filter)(m,(function(e){return!e.id})))&&(0,k.isEmpty)(j)){var e=(0,k.shuffle)((0,k.map)((0,k.combinations)(m,2),(function(e){var n=(0,o.Z)(e,2),a=n[0],r=n[1];return{playerA:{id:a.id||"",score:""},playerB:{id:r.id||"",score:""}}})));v(a===me.q.TwoMatch?(0,k.concat)(e,(0,k.map)(e,(function(e){var n=e.playerA;return{playerA:e.playerB,playerB:n}}))):e)}}),[m]),d?(0,N.jsx)(p.Z,{size:24,className:"mt-2"}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(V,{onClose:M,open:B,onPick:F,disabledPlayers:q}),(0,N.jsx)(te,{allActivePlayers:null===c||void 0===c?void 0:c.docs,className:"my-2",players:m,onAddPlayer:b,promotion:r,results:E}),(0,N.jsxs)(h.Z,{children:[(0,k.isEmpty)(j)&&(0,N.jsx)(z.Z,{severity:"info",variant:"standard",children:l("Wprowad\u017a wszystkich graczy aby wygenerowa\u0107 terminarz")}),(0,k.map)(j,(function(e,a){return e.playerA.id&&e.playerB.id&&(0,N.jsx)(xe,{isGroup:!0,control:n,result:e,formName:"phases.".concat(t,".groups.").concat(s,".results.").concat(a)},e.formId)}))]})]})}var je=S.memo(he);function ve(e){var n=e.schema,a=e.index,r=e.control,s=(0,S.useState)("0"),t=(0,o.Z)(s,2),l=t[0],i=t[1],c=(0,A.$)().t,d=n.phases[a];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"overflow-x-auto",children:(0,N.jsx)(P.Z,{variant:"outlined",children:(0,k.map)(d.groups,(function(e,n){return(0,N.jsxs)(f.Z,{className:"whitespace-nowrap",variant:l===String(n)?"contained":"outlined",size:"small",onClick:function(){return function(e){i(e)}(String(n))},children:[c("Grupa")," ",w.CR[n]]},n)}))})}),(0,k.map)(d.groups,(function(e,n){return(0,N.jsx)(g,{value:l,index:String(n),children:(0,N.jsx)(je,{control:r,typeOfWin:d.typeOfWin,promotion:e.promotion,index:n,phaseIndex:a})},n)}))]})}var Ze=S.memo(ve),ye=a(3433);function Ne(e){var n=e.schema,a=e.index,r=e.control,s=(0,de.Dq)({control:r,name:"phases.".concat(a,".results"),keyName:"formId"}),t=s.fields,o=s.append,l=(s.replace,n.phases[a]),i=(0,de.qo)({control:r,name:"phases.".concat(a,".results")}),c=(0,S.useCallback)((function(e){o(e)}),[o]),d=(0,S.useMemo)((function(){return(0,k.compact)([].concat((0,ye.Z)((0,k.flatMap)(i,"playerA.id")),(0,ye.Z)((0,k.flatMap)(i,"playerB.id"))))}),[i]);return(0,N.jsx)(N.Fragment,{children:(0,k.map)(t,(function(e,n){return(0,N.jsx)(xe,{formName:"phases.".concat(a,".results.").concat(n),disabledPlayers:d,typeOfWin:l.typeOfWin,control:r,result:e,onAdd:c},e.formId)}))})}var ge,we=S.memo(Ne),be=a(7689);!function(e){e[e.End=0]="End",e[e.Update=1]="Update",e[e.Start=2]="Start"}(ge||(ge={}));var Ce=function(){var e=(0,be.UO)().id,n=(0,S.useState)("0"),a=(0,o.Z)(n,2),y=a[0],P=a[1],z=(0,C.oQ)(e),D=z.mutate,B=z.isLoading,I=(0,A.$)().t,M=(0,l.u)(),q=(0,m.Z)((0,k.get)(M,"breakpoints").down("sm")),E=(0,C.DH)(),F=(0,C.C5)(e),W=F.data,Q=F.isLoading,O=(0,S.useMemo)((function(){return null===W||void 0===W?void 0:W.data()}),[W]),G=(0,C.wp)(null===O||void 0===O?void 0:O.schemaId),V=G.data,$=G.isLoading,L=(0,S.useMemo)((function(){return null===V||void 0===V?void 0:V.data()}),[V]),U=(0,de.cI)(),X=U.control,H=U.handleSubmit,R=U.reset,T=U.formState.isDirty;(0,S.useEffect)((function(){O&&L&&(null!==O&&void 0!==O&&O.phases?R(O):R((0,t.Z)((0,t.Z)({},O),{},{phases:(0,k.map)(null===L||void 0===L?void 0:L.phases,(function(e){return e.isGroupStage===me.Y.GroupStage?{groups:(0,k.map)(null===e||void 0===e?void 0:e.groups,(function(e){return{players:(0,k.map)((0,k.range)(0,e.playerCount),(function(){return{id:"",firstName:"",lastName:""}})),results:[]}}))}:{results:(0,k.map)((0,k.range)(0,Number(e.pairCount)||0),(function(){return{playerA:{id:"",score:""},playerB:{id:"",score:""}}}))}}))})))}),[R,O,L]);var Y=(0,S.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge.Update;return function(){H(function(){var n=(0,s.Z)((0,r.Z)().mark((function n(a){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log(a),D((0,t.Z)((0,t.Z)({},a),{},{startDate:e===ge.Start?(0,b.Z)(new Date,w.dq):a.startDate,endDate:e===ge.End?(0,b.Z)(new Date,w.dq):a.endDate})),console.log(a,"data");case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(e){console.log(e)}))()}}),[H,D]);return Q||$?(0,N.jsx)(p.Z,{size:24}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(i.Z,{className:"text-xs mr-1"}),(0,N.jsx)("span",{className:"text-xs",children:null===O||void 0===O?void 0:O.name}),(null===O||void 0===O?void 0:O.endDate)&&(0,N.jsxs)("span",{className:"text-xs ml-1",children:["(",I("Zako\u0144czony"),")"]})]}),(0,N.jsxs)(x.Z,{children:[(0,N.jsx)(v.Z,{value:y,onChange:function(e,n){P(n)},variant:"scrollable",children:(0,k.map)(null===L||void 0===L?void 0:L.phases,(function(e,n){return(0,N.jsx)(j.Z,{label:e.name,value:String(n)},n)}))}),L&&(0,k.map)(null===L||void 0===L?void 0:L.phases,(function(e,n){return(0,N.jsx)(g,{value:y,index:String(n),className:"p-3",children:e.isGroupStage===me.Y.Cup?(0,N.jsx)(we,{schema:L,index:n,control:X}):(0,N.jsx)(Ze,{schema:L,index:n,control:X})},n)})),(0,N.jsxs)(h.Z,{className:(0,Z.Z)("px-6 pb-4 flex",q&&"flex-col"),children:[E&&!(null!==O&&void 0!==O&&O.endDate)&&(0,N.jsx)(f.Z,{onClick:Y(),startIcon:B?(0,N.jsx)(p.Z,{size:24}):(0,N.jsx)(d.Z,{}),color:T?"error":"primary",children:I("Zapisz zmiany")}),E&&(null===O||void 0===O?void 0:O.startDate)&&!(null!==O&&void 0!==O&&O.endDate)&&(0,N.jsx)(f.Z,{onClick:Y(ge.End),startIcon:(0,N.jsx)(u.Z,{}),color:"primary",children:I("Zako\u0144cz turniej")}),E&&!(null!==O&&void 0!==O&&O.startDate)&&!(null!==O&&void 0!==O&&O.endDate)&&(0,N.jsx)(f.Z,{onClick:Y(ge.Start),startIcon:(0,N.jsx)(c.Z,{}),color:"primary",children:I("Wystartuj turniej")})]})]})]})}}}]);
//# sourceMappingURL=208.ae1f233d.chunk.js.map